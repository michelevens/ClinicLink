import{a as q,u as B,r as i,cE as u,j as e,w as M,f as p,l as I,t as r}from"./index-GzcG7CSS.js";import{u as F}from"./usePageTitle-CSRQyC0a.js";import{T as U}from"./triangle-alert-DWR7AhnE.js";import{M as V}from"./map-pin-B8WKBtoC.js";import{S as G}from"./save-Ba530v52.js";const H=["AL","AK","AZ","AR","CA","CO","CT","DC","DE","FL","GA","HI","ID","IL","IN","IA","KS","KY","LA","ME","MD","MA","MI","MN","MS","MO","MT","NE","NV","NH","NJ","NM","NY","NC","ND","OH","OK","OR","PA","RI","SC","SD","TN","TX","UT","VT","VA","WA","WV","WI","WY"],K=["Family Practice","Internal Medicine","Pediatrics","Emergency Medicine","Psychiatry","OB/GYN","Surgery","Cardiology","Neurology","Oncology","Geriatrics","Urgent Care","Orthopedics","Dermatology"];function Z(){F("Physician Profile");const{user:f}=q(),h=B(),[A,_]=i.useState(!0),[g,b]=i.useState(!1),[o,k]=i.useState(null),[D,T]=i.useState(!1),[E,O]=i.useState(!1),[n,v]=i.useState([]),[l,N]=i.useState([]),[d,y]=i.useState(5),[x,j]=i.useState("hybrid"),[c,S]=i.useState(!1),[m,P]=i.useState(""),[w,C]=i.useState(!0);i.useEffect(()=>{u.listProfiles().then(s=>{const t=(s.data||[]).find(a=>a.user_id===f?.id);t&&(k(t),v(t.licensed_states),N(t.specialties),y(t.max_supervisees),j(t.supervision_model),S(t.malpractice_confirmed),P(t.bio||""),C(t.is_active??!0))}).catch(()=>{}).finally(()=>_(!1))},[f?.id]);const L=async s=>{if(s.preventDefault(),!n.length){r.error("Select at least one state");return}if(!l.length){r.error("Select at least one specialty");return}if(!c){r.error("You must confirm malpractice coverage");return}b(!0);try{o?(await u.updateProfile(o.id,{licensed_states:n,specialties:l,max_supervisees:d,supervision_model:x,malpractice_confirmed:c,bio:m||void 0,is_active:w}),r.success("Profile updated")):(await u.createProfile({licensed_states:n,specialties:l,max_supervisees:d,supervision_model:x,malpractice_confirmed:c,bio:m||void 0}),r.success("Profile created! You're now visible in the physician directory."))}catch(t){const a=t?.response;a?.data?.npi_required?(T(!0),r.error("NPI verification required before creating a physician profile")):a?.data?.taxonomy_mismatch?(O(!0),r.error("Your NPI taxonomy does not indicate MD/DO credentials")):r.error("Failed to save profile")}finally{b(!1)}},Y=s=>v(t=>t.includes(s)?t.filter(a=>a!==s):[...t,s]),R=s=>N(t=>t.includes(s)?t.filter(a=>a!==s):[...t,s]);return A?e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx(M,{className:"w-8 h-8 animate-spin text-indigo-500"})}):D?e.jsx("div",{className:"max-w-2xl mx-auto space-y-6",children:e.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-2xl p-8 text-center space-y-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-amber-100 flex items-center justify-center mx-auto",children:e.jsx(U,{className:"w-8 h-8 text-amber-600"})}),e.jsx("h2",{className:"text-xl font-bold text-stone-900",children:"NPI Verification Required"}),e.jsx("p",{className:"text-stone-600 max-w-md mx-auto",children:"You must verify your NPI number before creating a supervising physician profile. Complete NPI verification in your settings first."}),e.jsx(p,{onClick:()=>h("/settings"),className:"!rounded-xl",children:"Go to Settings"})]})}):E?e.jsx("div",{className:"max-w-2xl mx-auto space-y-6",children:e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-2xl p-8 text-center space-y-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-red-100 flex items-center justify-center mx-auto",children:e.jsx(I,{className:"w-8 h-8 text-red-600"})}),e.jsx("h2",{className:"text-xl font-bold text-stone-900",children:"MD/DO Credentials Required"}),e.jsx("p",{className:"text-stone-600 max-w-md mx-auto",children:"Your NPI taxonomy does not indicate MD or DO credentials. Only physicians (MD/DO) can create a supervising physician profile for collaborative practice agreements."}),e.jsx(p,{onClick:()=>h("/collaborate"),variant:"outline",className:"!rounded-xl",children:"Back to Collaborate"})]})}):e.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-stone-900",children:o?"Edit Physician Profile":"Create Physician Profile"}),e.jsx("p",{className:"text-stone-500 mt-1",children:o?"Update your supervising physician profile":"Set up your profile to start accepting supervisees"})]}),e.jsxs("form",{onSubmit:L,className:"bg-white rounded-2xl border border-stone-200 p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-stone-700 mb-2",children:[e.jsx(V,{className:"w-4 h-4 inline mr-1"}),"Licensed States *"]}),e.jsx("div",{className:"flex flex-wrap gap-1.5",children:H.map(s=>e.jsx("button",{type:"button",onClick:()=>Y(s),className:`px-3 py-1 rounded-lg text-xs font-medium transition-all ${n.includes(s)?"bg-indigo-500 text-white":"bg-stone-100 text-stone-600 hover:bg-stone-200"}`,children:s},s))}),n.length>0&&e.jsxs("p",{className:"text-xs text-indigo-600 mt-1",children:[n.length," state(s) selected"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-stone-700 mb-2",children:"Specialties *"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:K.map(s=>e.jsx("button",{type:"button",onClick:()=>R(s),className:`px-3 py-1.5 rounded-xl text-sm font-medium transition-all ${l.includes(s)?"bg-purple-500 text-white":"bg-stone-100 text-stone-600 hover:bg-stone-200"}`,children:s},s))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-stone-700 mb-1",children:"Max Supervisees"}),e.jsx("input",{type:"number",min:1,max:20,value:d,onChange:s=>y(+s.target.value),className:"w-full rounded-xl border border-stone-200 px-4 py-2.5 text-sm focus:border-indigo-400 focus:ring-2 focus:ring-indigo-400/20 focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-stone-700 mb-1",children:"Supervision Model *"}),e.jsxs("select",{value:x,onChange:s=>j(s.target.value),className:"w-full rounded-xl border border-stone-200 px-4 py-2.5 text-sm focus:border-indigo-400 focus:ring-2 focus:ring-indigo-400/20 focus:outline-none",children:[e.jsx("option",{value:"telehealth",children:"Telehealth"}),e.jsx("option",{value:"in_person",children:"In-Person"}),e.jsx("option",{value:"hybrid",children:"Hybrid"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-stone-700 mb-1",children:"Bio"}),e.jsx("textarea",{value:m,onChange:s=>P(s.target.value),rows:3,placeholder:"Tell NPs/PAs about your practice, experience, and supervision approach...",className:"w-full rounded-xl border border-stone-200 px-4 py-3 text-sm focus:border-indigo-400 focus:ring-2 focus:ring-indigo-400/20 focus:outline-none resize-none"})]}),e.jsxs("label",{className:"flex items-start gap-3 p-4 rounded-xl border border-stone-200 bg-stone-50 cursor-pointer hover:bg-stone-100 transition-colors",children:[e.jsx("input",{type:"checkbox",checked:c,onChange:s=>S(s.target.checked),className:"mt-0.5 rounded border-stone-300 text-indigo-600 focus:ring-indigo-500"}),e.jsxs("div",{children:[e.jsxs("span",{className:"text-sm font-medium text-stone-700 flex items-center gap-1",children:[e.jsx(I,{className:"w-4 h-4 text-emerald-500"})," Malpractice Coverage Confirmation *"]}),e.jsx("p",{className:"text-xs text-stone-500 mt-0.5",children:"I confirm that I maintain active malpractice/professional liability insurance coverage."})]})]}),o&&e.jsxs("label",{className:"flex items-center gap-3 p-4 rounded-xl border border-stone-200 bg-stone-50 cursor-pointer hover:bg-stone-100 transition-colors",children:[e.jsx("input",{type:"checkbox",checked:w,onChange:s=>C(s.target.checked),className:"rounded border-stone-300 text-indigo-600 focus:ring-indigo-500"}),e.jsx("span",{className:"text-sm font-medium text-stone-700",children:"Profile active and visible in directory"})]}),e.jsx(p,{type:"submit",disabled:g,className:"w-full !rounded-xl",children:g?e.jsxs(e.Fragment,{children:[e.jsx(M,{className:"w-4 h-4 animate-spin"})," Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(G,{className:"w-4 h-4"})," ",o?"Update Profile":"Create Profile"]})})]})]})}export{Z as default};
