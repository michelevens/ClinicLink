import{k as C,u as k,r as a,j as e,L as h,f as i,S,t as l,x as L}from"./index-GzcG7CSS.js";import{I as E}from"./Input-B5MQDJHu.js";import{C as u}from"./Card-FSc1waky.js";import{C as R}from"./circle-alert-DPVkbFxy.js";import{C as I}from"./circle-check-big-B5eOtT2b.js";import{L as f}from"./lock-BbcKluH6.js";import{E as q}from"./eye-off-BQvtsNqL.js";import{E as A}from"./eye-DPEVXjN5.js";function G(){const[c]=C(),p=k(),d=c.get("token"),n=c.get("email"),[s,w]=a.useState(""),[t,j]=a.useState(""),[o,b]=a.useState(!1),[g,m]=a.useState(!1),[N,y]=a.useState(!1);if(!d||!n)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-primary-50 via-white to-secondary-50 px-4",children:e.jsx("div",{className:"w-full max-w-md",children:e.jsx(u,{children:e.jsxs("div",{className:"text-center py-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-red-50 flex items-center justify-center mx-auto mb-4",children:e.jsx(R,{className:"w-8 h-8 text-red-500"})}),e.jsx("h2",{className:"text-xl font-bold text-stone-900 mb-2",children:"Invalid Reset Link"}),e.jsx("p",{className:"text-stone-500 text-sm mb-6",children:"This password reset link is invalid or has expired. Please request a new one."}),e.jsx(h,{to:"/forgot-password",children:e.jsx(i,{className:"w-full",children:"Request New Link"})})]})})})});const v=async r=>{if(r.preventDefault(),s!==t){l.error("Passwords do not match");return}if(s.length<12){l.error("Password must be at least 12 characters");return}m(!0);try{await L.resetPassword({token:d,email:n,password:s,password_confirmation:t}),y(!0)}catch(x){const P=x instanceof Error?x.message:"Failed to reset password. The link may have expired.";l.error(P)}finally{m(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-primary-50 via-white to-secondary-50 px-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsx("div",{className:"text-center mb-8",children:e.jsxs(h,{to:"/",className:"inline-flex items-center gap-2.5 mb-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-primary-500 to-secondary-500 flex items-center justify-center",children:e.jsx(S,{className:"w-6 h-6 text-white"})}),e.jsx("span",{className:"text-2xl font-bold bg-gradient-to-r from-primary-600 to-secondary-600 bg-clip-text text-transparent",children:"ClinicLink"})]})}),e.jsx(u,{children:N?e.jsxs("div",{className:"text-center py-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-green-50 flex items-center justify-center mx-auto mb-4",children:e.jsx(I,{className:"w-8 h-8 text-green-500"})}),e.jsx("h2",{className:"text-xl font-bold text-stone-900 mb-2",children:"Password Reset!"}),e.jsx("p",{className:"text-stone-500 text-sm mb-6",children:"Your password has been updated successfully. You can now sign in with your new password."}),e.jsx(i,{className:"w-full",onClick:()=>p("/login"),children:"Sign In"})]}):e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-xl font-bold text-stone-900 mb-2",children:"Set new password"}),e.jsxs("p",{className:"text-stone-500 text-sm mb-6",children:["Enter your new password for ",e.jsx("strong",{children:n})]}),e.jsxs("form",{onSubmit:v,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"block text-sm font-medium text-stone-700",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-stone-400",children:e.jsx(f,{className:"w-4 h-4"})}),e.jsx("input",{type:o?"text":"password",placeholder:"At least 12 characters",value:s,onChange:r=>w(r.target.value),required:!0,minLength:12,className:"w-full rounded-xl border border-stone-300 bg-white pl-10 pr-10 py-2.5 text-sm text-stone-900 placeholder:text-stone-400 focus:border-primary-500 focus:ring-2 focus:ring-primary-500/20 focus:outline-none transition-all duration-200"}),e.jsx("button",{type:"button",onClick:()=>b(!o),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-stone-400 hover:text-stone-600",children:o?e.jsx(q,{className:"w-4 h-4"}):e.jsx(A,{className:"w-4 h-4"})})]})]}),e.jsx(E,{label:"Confirm Password",type:"password",placeholder:"Re-enter your password",value:t,onChange:r=>j(r.target.value),icon:e.jsx(f,{className:"w-4 h-4"}),required:!0,error:t&&s!==t?"Passwords do not match":void 0}),e.jsx(i,{type:"submit",isLoading:g,className:"w-full",children:"Reset Password"})]})]})})]})})}export{G as ResetPassword};
