import{c as K,k as re,u as ne,r,a as oe,o as le,p as ie,q as ce,j as e,L as G,S as de,v as me,X as A,w as D,d as H,B as xe,l as ue,i as pe,K as he,f as fe,t as E}from"./index-GzcG7CSS.js";import{I as N}from"./Input-B5MQDJHu.js";import{C as ge}from"./Card-FSc1waky.js";import{u as ye}from"./usePageTitle-CSRQyC0a.js";import{U as be}from"./user-BvMymkx8.js";import{M as ve}from"./mail-BeMqAM3p.js";import{L as Ne}from"./lock-BbcKluH6.js";import{E as je}from"./eye-off-BQvtsNqL.js";import{E as we}from"./eye-DPEVXjN5.js";import{M as Se}from"./map-pin-B8WKBtoC.js";const Ie=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-4 8",key:"7n84p3"}]],Ce=K("at-sign",Ie);const ke=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],Pe=K("wand-sparkles",ke),Le=[{value:"student",label:"Student",desc:"I need clinical rotation hours"},{value:"practitioner",label:"Practicing NP/PA",desc:"I need a collaborative practice agreement"},{value:"site_manager",label:"Site Manager",desc:"I manage a clinical facility"},{value:"preceptor",label:"Preceptor",desc:"I supervise students clinically"},{value:"coordinator",label:"University Coordinator",desc:"I manage student placements"},{value:"professor",label:"Professor / Faculty",desc:"I oversee students in my program"}];function Me(){const o="ABCDEFGHJKLMNPQRSTUVWXYZ",l="abcdefghjkmnpqrstuvwxyz",m="23456789",x="!@#$%&*?",u=o+l+m+x;let t="";t+=o[Math.floor(Math.random()*o.length)],t+=l[Math.floor(Math.random()*l.length)],t+=m[Math.floor(Math.random()*m.length)],t+=x[Math.floor(Math.random()*x.length)];for(let n=4;n<16;n++)t+=u[Math.floor(Math.random()*u.length)];return t.split("").sort(()=>Math.random()-.5).join("")}function _e(o){if(!o)return{score:0,label:"",color:""};let l=0;return o.length>=12&&l++,o.length>=16&&l++,/[a-z]/.test(o)&&/[A-Z]/.test(o)&&l++,/\d/.test(o)&&l++,/[^a-zA-Z0-9]/.test(o)&&l++,l<=1?{score:1,label:"Weak",color:"bg-red-500"}:l<=2?{score:2,label:"Fair",color:"bg-orange-500"}:l<=3?{score:3,label:"Good",color:"bg-amber-500"}:l<=4?{score:4,label:"Strong",color:"bg-green-500"}:{score:5,label:"Very Strong",color:"bg-emerald-500"}}function $e(){ye("Create Account");const[o]=re(),l=o.get("email")||"",m=o.get("role")||"student",x=o.get("code")||"",u=ne(),[t,n]=r.useState({firstName:"",lastName:"",email:l,username:"",password:"",role:m,universityId:"",programId:"",npiNumber:"",siteId:"",licenseCode:x}),[j,R]=r.useState(!1),{register:W,isLoading:J}=oe(),[i,w]=r.useState(""),[p,S]=r.useState([]),[U,z]=r.useState(!1),[h,O]=r.useState(null),[q,f]=r.useState(!1),I=r.useRef(null),C=r.useRef(null),[c,k]=r.useState(""),[g,P]=r.useState([]),[B,T]=r.useState(!1),[y,$]=r.useState(null),[F,b]=r.useState(!1),L=r.useRef(null),M=r.useRef(null),[Y,v]=r.useState([]),[V,Z]=r.useState(!1),X=["student","preceptor","coordinator","professor"].includes(t.role),Q=t.role==="preceptor",ee=t.role==="student"&&t.universityId;r.useEffect(()=>{if(!t.universityId||t.role!=="student"){v([]);return}Z(!0),le.get(`/universities/${t.universityId}/programs`).then(s=>v(Array.isArray(s)?s:[])).catch(()=>v([])).finally(()=>Z(!1))},[t.universityId,t.role]),r.useEffect(()=>{if(!i.trim()||i.length<2){S([]);return}z(!0),C.current&&clearTimeout(C.current),C.current=setTimeout(async()=>{try{const s=await ie.list({search:i});S((s.data||[]).map(a=>({id:a.id,name:a.name,city:a.city,state:a.state,system_id:a.system_id})))}catch{S([])}finally{z(!1)}},300)},[i]),r.useEffect(()=>{if(!c.trim()||c.length<2){P([]);return}T(!0),M.current&&clearTimeout(M.current),M.current=setTimeout(async()=>{try{const s=await ce.list({search:c});P((s.data||[]).map(a=>({id:a.id,name:a.name,city:a.city,state:a.state,system_id:a.system_id})))}catch{P([])}finally{T(!1)}},300)},[c]),r.useEffect(()=>{const s=a=>{I.current&&!I.current.contains(a.target)&&f(!1),L.current&&!L.current.contains(a.target)&&b(!1)};return document.addEventListener("mousedown",s),()=>document.removeEventListener("mousedown",s)},[]);const d=r.useMemo(()=>_e(t.password),[t.password]),se=r.useMemo(()=>[{label:"At least 12 characters",pass:t.password.length>=12},{label:"Uppercase letter",pass:/[A-Z]/.test(t.password)},{label:"Lowercase letter",pass:/[a-z]/.test(t.password)},{label:"Number",pass:/\d/.test(t.password)},{label:"Special character (!@#$%)",pass:/[^a-zA-Z0-9]/.test(t.password)}],[t.password]),te=()=>{const s=Me();n(a=>({...a,password:s})),R(!0),E.success("Strong password generated! Make sure to save it.")},ae=async s=>{if(s.preventDefault(),t.password.length<12){E.error("Password must be at least 12 characters");return}try{await W({...t,universityId:t.universityId||void 0,programId:t.programId||void 0,siteId:t.siteId||void 0,licenseCode:t.licenseCode||void 0}),u("/verify-email?email="+encodeURIComponent(t.email))}catch(a){const _=a instanceof Error?a.message:"Registration failed. Please try again.";E.error(_)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-primary-50 via-white to-secondary-50 px-4 py-12",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs(G,{to:"/",className:"inline-flex items-center gap-2.5 mb-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-primary-500 to-secondary-500 flex items-center justify-center",children:e.jsx(de,{className:"w-6 h-6 text-white"})}),e.jsx("span",{className:"text-2xl font-bold bg-gradient-to-r from-primary-600 to-secondary-600 bg-clip-text text-transparent",children:"ClinicLink"})]}),e.jsx("h1",{className:"text-2xl font-bold text-stone-900",children:"Create your account"}),e.jsx("p",{className:"text-stone-500 mt-1",children:"Join the clinical placement network"})]}),e.jsxs(ge,{children:[e.jsxs("form",{onSubmit:ae,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(N,{label:"First Name",placeholder:"Sarah",value:t.firstName,onChange:s=>n({...t,firstName:s.target.value}),icon:e.jsx(be,{className:"w-4 h-4"}),required:!0}),e.jsx(N,{label:"Last Name",placeholder:"Chen",value:t.lastName,onChange:s=>n({...t,lastName:s.target.value}),required:!0})]}),e.jsx(N,{label:"Username",placeholder:"sarahchen",value:t.username,onChange:s=>n({...t,username:s.target.value.toLowerCase().replace(/[^a-z0-9._-]/g,"")}),icon:e.jsx(Ce,{className:"w-4 h-4"}),required:!0}),e.jsx(N,{label:"Email",type:"email",placeholder:"you@university.edu",value:t.email,onChange:s=>n({...t,email:s.target.value}),icon:e.jsx(ve,{className:"w-4 h-4"}),required:!0}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"block text-sm font-medium text-stone-700",children:"Password"}),e.jsxs("button",{type:"button",onClick:te,className:"inline-flex items-center gap-1 text-xs font-medium text-primary-600 hover:text-primary-700 transition-colors",children:[e.jsx(Pe,{className:"w-3 h-3"})," Suggest strong password"]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-stone-400",children:e.jsx(Ne,{className:"w-4 h-4"})}),e.jsx("input",{type:j?"text":"password",placeholder:"Create a password (min 12 chars)",value:t.password,onChange:s=>n({...t,password:s.target.value}),required:!0,className:"w-full rounded-xl border border-stone-300 bg-white pl-10 pr-10 py-2.5 text-sm text-stone-900 placeholder:text-stone-400 focus:border-primary-500 focus:ring-2 focus:ring-primary-500/20 focus:outline-none transition-all duration-200"}),e.jsx("button",{type:"button",onClick:()=>R(!j),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-stone-400 hover:text-stone-600",children:j?e.jsx(je,{className:"w-4 h-4"}):e.jsx(we,{className:"w-4 h-4"})})]}),t.password&&e.jsxs("div",{className:"space-y-2 pt-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex-1 h-1.5 bg-stone-200 rounded-full overflow-hidden flex gap-0.5",children:[1,2,3,4,5].map(s=>e.jsx("div",{className:`flex-1 rounded-full transition-colors ${s<=d.score?d.color:"bg-stone-200"}`},s))}),e.jsx("span",{className:`text-xs font-medium ${d.score<=1?"text-red-600":d.score<=2?"text-orange-600":d.score<=3?"text-amber-600":"text-green-600"}`,children:d.label})]}),e.jsx("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1",children:se.map(s=>e.jsxs("div",{className:"flex items-center gap-1.5",children:[s.pass?e.jsx(me,{className:"w-3 h-3 text-green-500"}):e.jsx(A,{className:"w-3 h-3 text-stone-300"}),e.jsx("span",{className:`text-xs ${s.pass?"text-green-600":"text-stone-400"}`,children:s.label})]},s.label))})]})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"block text-sm font-medium text-stone-700",children:"I am a..."}),e.jsx("div",{className:"space-y-2",children:Le.map(s=>e.jsxs("label",{className:`flex items-center gap-3 p-3 rounded-xl border cursor-pointer transition-all ${t.role===s.value?"border-primary-500 bg-primary-50 ring-2 ring-primary-500/20":"border-stone-200 hover:border-stone-300"}`,children:[e.jsx("input",{type:"radio",name:"role",value:s.value,checked:t.role===s.value,onChange:()=>n({...t,role:s.value}),className:"sr-only"}),e.jsx("div",{className:`w-4 h-4 rounded-full border-2 flex items-center justify-center ${t.role===s.value?"border-primary-500":"border-stone-300"}`,children:t.role===s.value&&e.jsx("div",{className:"w-2 h-2 rounded-full bg-primary-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-stone-900",children:s.label}),e.jsx("p",{className:"text-xs text-stone-500",children:s.desc})]})]},s.value))})]}),Q&&e.jsxs("div",{className:"space-y-1.5",ref:L,children:[e.jsx("label",{className:"block text-sm font-medium text-stone-700",children:"Clinical Site"}),y?e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-xl border border-primary-300 bg-primary-50",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Se,{className:"w-4 h-4 text-primary-600"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-stone-900",children:y.name}),y.system_id&&e.jsxs("p",{className:"text-xs text-primary-600 font-mono",children:["ID: ",y.system_id]})]})]}),e.jsx("button",{type:"button",onClick:()=>{$(null),n(s=>({...s,siteId:""})),k("")},className:"text-stone-400 hover:text-red-500",children:e.jsx(A,{className:"w-4 h-4"})})]}):e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-stone-400",children:B?e.jsx(D,{className:"w-4 h-4 animate-spin"}):e.jsx(H,{className:"w-4 h-4"})}),e.jsx("input",{type:"text",value:c,onChange:s=>{k(s.target.value),b(!0)},onFocus:()=>g.length>0&&b(!0),placeholder:"Search by site name or ID...",className:"w-full rounded-xl border border-stone-300 bg-white pl-10 pr-4 py-2.5 text-sm text-stone-900 placeholder:text-stone-400 focus:border-primary-500 focus:ring-2 focus:ring-primary-500/20 focus:outline-none transition-all duration-200"}),F&&g.length>0&&e.jsx("div",{className:"absolute z-50 mt-1 w-full bg-white border border-stone-200 rounded-xl shadow-lg max-h-48 overflow-y-auto",children:g.map(s=>e.jsxs("button",{type:"button",onClick:()=>{$({id:s.id,name:s.name,system_id:s.system_id}),n(a=>({...a,siteId:s.id})),b(!1),k("")},className:"w-full text-left px-4 py-2.5 hover:bg-primary-50 transition-colors border-b border-stone-100 last:border-0",children:[e.jsx("p",{className:"text-sm font-medium text-stone-900",children:s.name}),e.jsxs("p",{className:"text-xs text-stone-500",children:[s.system_id&&e.jsxs("span",{className:"font-mono text-primary-600",children:["ID: ",s.system_id]}),s.system_id&&(s.city||s.state)&&e.jsx("span",{children:" · "}),(s.city||s.state)&&e.jsx("span",{children:[s.city,s.state].filter(Boolean).join(", ")})]})]},s.id))}),F&&c.length>=2&&!B&&g.length===0&&e.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-stone-200 rounded-xl shadow-lg p-4 text-center",children:[e.jsxs("p",{className:"text-sm text-stone-500",children:['No sites found for "',c,'"']}),e.jsx("p",{className:"text-xs text-stone-400 mt-1",children:"Contact your site manager if your site isn't listed"})]})]}),e.jsx("p",{className:"text-xs text-stone-400",children:'Search by site name, city, or system ID (e.g., "A3B7C1F")'})]}),X&&e.jsxs("div",{className:"space-y-1.5",ref:I,children:[e.jsx("label",{className:"block text-sm font-medium text-stone-700",children:t.role==="student"?"Your School / University":t.role==="preceptor"?"University Affiliation (Optional)":"Affiliated Organization"}),h?e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-xl border border-primary-300 bg-primary-50",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xe,{className:"w-4 h-4 text-primary-600"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-stone-900",children:h.name}),h.system_id&&e.jsxs("p",{className:"text-xs text-primary-600 font-mono",children:["ID: ",h.system_id]})]})]}),e.jsx("button",{type:"button",onClick:()=>{O(null),n(s=>({...s,universityId:"",programId:""})),w(""),v([])},className:"text-stone-400 hover:text-red-500",children:e.jsx(A,{className:"w-4 h-4"})})]}):e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-stone-400",children:U?e.jsx(D,{className:"w-4 h-4 animate-spin"}):e.jsx(H,{className:"w-4 h-4"})}),e.jsx("input",{type:"text",value:i,onChange:s=>{w(s.target.value),f(!0)},onFocus:()=>p.length>0&&f(!0),placeholder:t.role==="preceptor"?"Search by university name or ID (optional)...":"Search by school name or ID...",className:"w-full rounded-xl border border-stone-300 bg-white pl-10 pr-4 py-2.5 text-sm text-stone-900 placeholder:text-stone-400 focus:border-primary-500 focus:ring-2 focus:ring-primary-500/20 focus:outline-none transition-all duration-200"}),q&&p.length>0&&e.jsx("div",{className:"absolute z-50 mt-1 w-full bg-white border border-stone-200 rounded-xl shadow-lg max-h-48 overflow-y-auto",children:p.map(s=>e.jsxs("button",{type:"button",onClick:()=>{O({id:s.id,name:s.name,system_id:s.system_id}),n(a=>({...a,universityId:s.id,programId:""})),f(!1),w("")},className:"w-full text-left px-4 py-2.5 hover:bg-primary-50 transition-colors border-b border-stone-100 last:border-0",children:[e.jsx("p",{className:"text-sm font-medium text-stone-900",children:s.name}),e.jsxs("p",{className:"text-xs text-stone-500",children:[s.system_id&&e.jsxs("span",{className:"font-mono text-primary-600",children:["ID: ",s.system_id]}),s.system_id&&(s.city||s.state)&&e.jsx("span",{children:" · "}),(s.city||s.state)&&e.jsx("span",{children:[s.city,s.state].filter(Boolean).join(", ")})]})]},s.id))}),q&&i.length>=2&&!U&&p.length===0&&e.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-stone-200 rounded-xl shadow-lg p-4 text-center",children:[e.jsxs("p",{className:"text-sm text-stone-500",children:['No organizations found for "',i,'"']}),e.jsx("p",{className:"text-xs text-stone-400 mt-1",children:"You can add your organization after registration"})]})]}),e.jsx("p",{className:"text-xs text-stone-400",children:t.role==="student"?'Search by university name, city, or system ID (e.g., "B4E2D9A")':t.role==="preceptor"?"Search by university name or ID — optional":"Search by organization name, city, or system ID"})]}),t.role==="preceptor"&&e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"block text-sm font-medium text-stone-700",children:"NPI Number (Optional)"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-stone-400",children:e.jsx(ue,{className:"w-4 h-4"})}),e.jsx("input",{type:"text",value:t.npiNumber,onChange:s=>{const a=s.target.value.replace(/\D/g,"").slice(0,10);n(_=>({..._,npiNumber:a}))},placeholder:"10-digit NPI number",maxLength:10,className:"w-full rounded-xl border border-stone-300 bg-white pl-10 pr-4 py-2.5 text-sm text-stone-900 placeholder:text-stone-400 focus:border-primary-500 focus:ring-2 focus:ring-primary-500/20 focus:outline-none transition-all duration-200"})]}),e.jsx("p",{className:"text-xs text-stone-400",children:"If you have an NPI, enter it here. You can also add it later during onboarding."}),t.npiNumber&&t.npiNumber.length>0&&t.npiNumber.length!==10&&e.jsx("p",{className:"text-xs text-amber-600",children:"NPI must be exactly 10 digits"})]}),ee&&e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"block text-sm font-medium text-stone-700",children:"Your Program"}),V?e.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-xl border border-stone-200",children:[e.jsx(D,{className:"w-4 h-4 animate-spin text-stone-400"}),e.jsx("span",{className:"text-sm text-stone-500",children:"Loading programs..."})]}):Y.length===0?e.jsxs("div",{className:"p-3 rounded-xl border border-stone-200 bg-stone-50",children:[e.jsx("p",{className:"text-sm text-stone-500",children:"No programs found for this university."}),e.jsx("p",{className:"text-xs text-stone-400 mt-1",children:"Your coordinator can assign you to a program later."})]}):e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-stone-400",children:e.jsx(pe,{className:"w-4 h-4"})}),e.jsxs("select",{value:t.programId,onChange:s=>n(a=>({...a,programId:s.target.value})),className:"w-full rounded-xl border border-stone-300 bg-white pl-10 pr-4 py-2.5 text-sm text-stone-900 focus:border-primary-500 focus:ring-2 focus:ring-primary-500/20 focus:outline-none transition-all duration-200 appearance-none",children:[e.jsx("option",{value:"",children:"-- Select your program --"}),Y.map(s=>e.jsxs("option",{value:s.id,children:[s.name," (",s.degree_type,") - ",s.required_hours,"h"]},s.id))]})]}),e.jsx("p",{className:"text-xs text-stone-400",children:"Select the clinical program you are enrolled in"})]}),t.role==="student"&&e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"block text-sm font-medium text-stone-700",children:"University License Code (Optional)"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-stone-400",children:e.jsx(he,{className:"w-4 h-4"})}),e.jsx("input",{type:"text",value:t.licenseCode,onChange:s=>n(a=>({...a,licenseCode:s.target.value.toUpperCase().replace(/[^A-Z0-9]/g,"").slice(0,20)})),placeholder:"Enter your university code",maxLength:20,className:"w-full rounded-xl border border-stone-300 bg-white pl-10 pr-4 py-2.5 text-sm text-stone-900 placeholder:text-stone-400 focus:border-primary-500 focus:ring-2 focus:ring-primary-500/20 focus:outline-none transition-all duration-200 uppercase tracking-wider"})]}),e.jsx("p",{className:"text-xs text-stone-400",children:"If your university provided a license code, enter it here to get Pro access automatically."})]}),e.jsx(fe,{type:"submit",isLoading:J,className:"w-full",children:"Create Account"})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("p",{className:"text-sm text-stone-500",children:["Already have an account?"," ",e.jsx(G,{to:"/login",className:"text-primary-600 hover:text-primary-700 font-medium",children:"Sign in"})]})})]})]})})}export{$e as RegisterPage};
