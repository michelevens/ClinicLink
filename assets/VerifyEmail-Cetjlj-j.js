import{y as u,r as l,x as d,j as e,L as c,S as x,w as j,f as m,m as p,k as b,t as o}from"./index-GzcG7CSS.js";import{C as h}from"./Card-FSc1waky.js";import{C as y}from"./circle-check-big-B5eOtT2b.js";import{C as g}from"./circle-x-BhxGvoPR.js";import{M as N}from"./mail-BeMqAM3p.js";function E(){const[r]=b(),s=r.get("email")||"",[i,n]=l.useState(!1),[t,a]=l.useState(!1),f=async()=>{if(s){n(!0);try{await d.resendVerification(s),a(!0),o.success("Verification email sent!")}catch{o.error("Could not resend. Please try again later.")}finally{n(!1)}}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-primary-50 via-white to-secondary-50 px-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsx("div",{className:"text-center mb-8",children:e.jsxs(c,{to:"/",className:"inline-flex items-center gap-2.5 mb-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-primary-500 to-secondary-500 flex items-center justify-center",children:e.jsx(x,{className:"w-6 h-6 text-white"})}),e.jsx("span",{className:"text-2xl font-bold bg-gradient-to-r from-primary-600 to-secondary-600 bg-clip-text text-transparent",children:"ClinicLink"})]})}),e.jsx(h,{children:e.jsxs("div",{className:"text-center py-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-primary-50 flex items-center justify-center mx-auto mb-4",children:e.jsx(N,{className:"w-8 h-8 text-primary-500"})}),e.jsx("h2",{className:"text-xl font-bold text-stone-900 mb-2",children:"Check your email"}),e.jsxs("p",{className:"text-stone-500 text-sm mb-6",children:["We sent a verification link to"," ",s?e.jsx("strong",{children:s}):"your email address",". Click the link to verify your account."]}),e.jsx("div",{className:"bg-amber-50 text-amber-800 rounded-xl px-4 py-3 text-sm mb-6",children:"Your account also needs admin approval. You'll be notified once both steps are complete."}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(m,{variant:"outline",className:"w-full",onClick:f,isLoading:i,disabled:t,children:t?"Email sent!":"Resend verification email"}),e.jsx(c,{to:"/login",className:"block text-sm text-primary-600 hover:text-primary-700 font-medium",children:"Back to Sign In"})]})]})})]})})}function L(){const{token:r}=u(),[s,i]=l.useState("loading"),[n,t]=l.useState("");return l.useEffect(()=>{if(!r){i("error"),t("Invalid verification link.");return}d.verifyEmail(r).then(a=>{i("success"),t(a.message||"Email verified successfully!")}).catch(a=>{i("error"),t(a instanceof Error?a.message:"Verification failed. The link may be expired.")})},[r]),e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-primary-50 via-white to-secondary-50 px-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsx("div",{className:"text-center mb-8",children:e.jsxs(c,{to:"/",className:"inline-flex items-center gap-2.5 mb-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-primary-500 to-secondary-500 flex items-center justify-center",children:e.jsx(x,{className:"w-6 h-6 text-white"})}),e.jsx("span",{className:"text-2xl font-bold bg-gradient-to-r from-primary-600 to-secondary-600 bg-clip-text text-transparent",children:"ClinicLink"})]})}),e.jsx(h,{children:e.jsxs("div",{className:"text-center py-4",children:[s==="loading"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-primary-50 flex items-center justify-center mx-auto mb-4",children:e.jsx(j,{className:"w-8 h-8 text-primary-500 animate-spin"})}),e.jsx("h2",{className:"text-xl font-bold text-stone-900 mb-2",children:"Verifying your email..."}),e.jsx("p",{className:"text-stone-500 text-sm",children:"Please wait a moment."})]}),s==="success"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-green-50 flex items-center justify-center mx-auto mb-4",children:e.jsx(y,{className:"w-8 h-8 text-green-500"})}),e.jsx("h2",{className:"text-xl font-bold text-stone-900 mb-2",children:"Email verified!"}),e.jsx("p",{className:"text-stone-500 text-sm mb-6",children:n}),e.jsx(c,{to:"/login",children:e.jsx(m,{className:"w-full",children:"Go to Sign In"})})]}),s==="error"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-red-50 flex items-center justify-center mx-auto mb-4",children:e.jsx(g,{className:"w-8 h-8 text-red-500"})}),e.jsx("h2",{className:"text-xl font-bold text-stone-900 mb-2",children:"Verification failed"}),e.jsx("p",{className:"text-stone-500 text-sm mb-6",children:n}),e.jsx("div",{className:"space-y-3",children:e.jsx(c,{to:"/login",children:e.jsxs(m,{variant:"outline",className:"w-full",children:[e.jsx(p,{className:"w-4 h-4 mr-1.5"}),"Back to Sign In"]})})})]})]})})]})})}export{L as VerifyEmailCallback,E as VerifyEmailPrompt};
