import{y as v,u as y,bi as _,j as e,w,B as C,f as P,m as A,i as p,U as g,H as d,A as h,G as S,g as $,h as U}from"./index-GzcG7CSS.js";import{C as n}from"./Card-FSc1waky.js";import{B as k}from"./Breadcrumbs-B2TfZ2DQ.js";import{B as i}from"./Badge-9_pL70Ln.js";import{u as E}from"./usePageTitle-CSRQyC0a.js";import{C as B}from"./circle-check-DXK6A2lJ.js";import{M as D}from"./map-pin-B8WKBtoC.js";import{P as q}from"./phone-D6Tod6__.js";import{G as T}from"./globe-DMMzYTpl.js";import{T as L}from"./triangle-alert-DWR7AhnE.js";import{T as O}from"./trending-up-Cyj7Q2GJ.js";import"./chevron-right-D8jrJqqK.js";const u={active:"success",draft:"default",pending_review:"warning",expired:"danger",terminated:"danger",issued:"success",pending:"warning",approved:"success",rejected:"danger"},j={BSN:"bg-blue-100 text-blue-700",MSN:"bg-purple-100 text-purple-700",DNP:"bg-emerald-100 text-emerald-700",PhD:"bg-rose-100 text-rose-700","PA-C":"bg-amber-100 text-amber-700",MD:"bg-teal-100 text-teal-700"};function Q(){E("University Details");const{id:N}=v(),f=y(),{data:t,isLoading:b}=_(N);if(b)return e.jsx("div",{className:"flex justify-center py-24",children:e.jsx(w,{className:"w-8 h-8 animate-spin text-primary-500"})});if(!t)return e.jsxs("div",{className:"text-center py-24",children:[e.jsx(C,{className:"w-12 h-12 text-stone-300 mx-auto mb-3"}),e.jsx("h2",{className:"text-lg font-semibold text-stone-900",children:"University not found"}),e.jsxs(P,{variant:"outline",className:"mt-4",onClick:()=>f("/universities"),children:[e.jsx(A,{className:"w-4 h-4 mr-2"})," Back to Universities"]})]});const c=t.programs||[],m=t.affiliation_agreements||[],l=t.student_profiles||[],r=t.ce_policy,x=t.ce_certificates||[],a=t.analytics;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(k,{items:[{label:"Universities",path:"/universities"},{label:t.name}]}),e.jsxs("div",{className:"bg-gradient-to-r from-primary-50 to-secondary-50 rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h1",{className:"text-2xl font-bold text-stone-900",children:t.name}),t.is_verified&&e.jsxs(i,{variant:"success",children:[e.jsx(B,{className:"w-3 h-3 mr-1"}),"Verified"]})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-stone-600",children:[t.city&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(D,{className:"w-4 h-4 text-stone-400"}),t.address?`${t.address}, `:"",t.city,", ",t.state," ",t.zip]}),t.phone&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(q,{className:"w-4 h-4 text-stone-400"})," ",t.phone]}),t.website&&e.jsxs("a",{href:t.website,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-primary-600 hover:underline",children:[e.jsx(T,{className:"w-4 h-4"})," Website"]})]})]})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-5 gap-3",children:[{icon:e.jsx(p,{className:"w-5 h-5"}),label:"Programs",value:c.length,color:"bg-primary-50 text-primary-600"},{icon:e.jsx(g,{className:"w-5 h-5"}),label:"Students",value:t.student_profiles_count??l.length,color:"bg-green-50 text-green-600"},{icon:e.jsx(d,{className:"w-5 h-5"}),label:"Agreements",value:m.length,color:"bg-amber-50 text-amber-600"},{icon:e.jsx(h,{className:"w-5 h-5"}),label:"CE Certificates",value:x.length,color:"bg-secondary-50 text-secondary-600"},{icon:e.jsx(S,{className:"w-5 h-5"}),label:"CE Policy",value:r?"Active":"None",color:"bg-stone-100 text-stone-600"}].map(s=>e.jsxs("div",{className:"bg-white rounded-xl border border-stone-200 p-4 text-center",children:[e.jsx("div",{className:`w-10 h-10 rounded-xl ${s.color} flex items-center justify-center mx-auto mb-2`,children:s.icon}),e.jsx("p",{className:"text-xl font-bold text-stone-900",children:s.value}),e.jsx("p",{className:"text-xs text-stone-500",children:s.label})]},s.label))}),e.jsxs(n,{children:[e.jsxs("h2",{className:"text-sm font-semibold text-stone-900 mb-3 flex items-center gap-2",children:[e.jsx(p,{className:"w-4 h-4 text-primary-500"})," Programs (",c.length,")"]}),c.length===0?e.jsx("p",{className:"text-sm text-stone-400 py-4 text-center",children:"No programs added yet"}):e.jsx("div",{className:"space-y-2",children:c.map(s=>e.jsx("div",{className:"p-4 bg-stone-50 rounded-xl",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-sm font-semibold text-stone-900",children:s.name}),e.jsx("span",{className:`inline-block px-2 py-0.5 rounded-full text-xs font-medium ${j[s.degree_type]||"bg-stone-100 text-stone-700"}`,children:s.degree_type}),!s.is_active&&e.jsx(i,{variant:"default",size:"sm",children:"Inactive"})]}),s.specialties?.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1 mt-1.5",children:s.specialties.map(o=>e.jsx(i,{variant:"default",size:"sm",children:o},o))})]}),e.jsxs("div",{className:"text-right text-xs text-stone-500",children:[e.jsx($,{className:"w-3 h-3 inline mr-0.5"}),s.required_hours,"h required"]})]})},s.id))})]}),l.length>0&&e.jsxs(n,{children:[e.jsxs("h2",{className:"text-sm font-semibold text-stone-900 mb-3 flex items-center gap-2",children:[e.jsx(g,{className:"w-4 h-4 text-primary-500"})," Students (",l.length,")"]}),e.jsxs("div",{className:"space-y-2",children:[l.slice(0,20).map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-stone-50 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"w-9 h-9 rounded-full bg-green-100 flex items-center justify-center text-green-700 font-semibold text-sm",children:[s.user?.first_name?.[0]||"?",s.user?.last_name?.[0]||"?"]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-stone-900",children:s.user?`${s.user.first_name} ${s.user.last_name}`:"Unknown"}),e.jsxs("p",{className:"text-xs text-stone-500",children:[s.program?.name||"No program"," ",s.program?.degree_type?`(${s.program.degree_type})`:""]})]})]}),e.jsx("div",{className:"text-right text-xs text-stone-500",children:s.hours_completed?`${s.hours_completed}/${s.hours_required||"?"}h`:""})]},s.id)),l.length>20&&e.jsxs("p",{className:"text-xs text-stone-400 text-center py-2",children:["Showing 20 of ",l.length," students"]})]})]}),m.length>0&&e.jsxs(n,{children:[e.jsxs("h2",{className:"text-sm font-semibold text-stone-900 mb-3 flex items-center gap-2",children:[e.jsx(d,{className:"w-4 h-4 text-primary-500"})," Affiliation Agreements (",m.length,")"]}),e.jsx("div",{className:"space-y-2",children:m.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-stone-50 rounded-xl",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-stone-900",children:s.site?.name||"Unknown Site"}),e.jsxs("p",{className:"text-xs text-stone-500",children:[s.start_date?new Date(s.start_date).toLocaleDateString():"?"," - ",s.end_date?new Date(s.end_date).toLocaleDateString():"?"]})]}),e.jsx(i,{variant:u[s.status]||"default",size:"sm",children:s.status})]},s.id))})]}),r&&e.jsxs(n,{children:[e.jsxs("h2",{className:"text-sm font-semibold text-stone-900 mb-3 flex items-center gap-2",children:[e.jsx(h,{className:"w-4 h-4 text-primary-500"})," CE Policy"]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:[e.jsxs("div",{className:"bg-stone-50 rounded-xl p-3",children:[e.jsx("p",{className:"text-xs text-stone-500 mb-1",children:"Offers CE"}),e.jsx("p",{className:"text-sm font-medium text-stone-900",children:r.offers_ce?"Yes":"No"})]}),r.accrediting_body&&e.jsxs("div",{className:"bg-stone-50 rounded-xl p-3",children:[e.jsx("p",{className:"text-xs text-stone-500 mb-1",children:"Accrediting Body"}),e.jsx("p",{className:"text-sm font-medium text-stone-900",children:r.accrediting_body})]}),e.jsxs("div",{className:"bg-stone-50 rounded-xl p-3",children:[e.jsx("p",{className:"text-xs text-stone-500 mb-1",children:"Hours Per Rotation"}),e.jsx("p",{className:"text-sm font-medium text-stone-900",children:r.contact_hours_per_rotation})]}),r.signer_name&&e.jsxs("div",{className:"bg-stone-50 rounded-xl p-3",children:[e.jsx("p",{className:"text-xs text-stone-500 mb-1",children:"Signer"}),e.jsxs("p",{className:"text-sm font-medium text-stone-900",children:[r.signer_name,r.signer_credentials?`, ${r.signer_credentials}`:""]})]}),e.jsxs("div",{className:"bg-stone-50 rounded-xl p-3",children:[e.jsx("p",{className:"text-xs text-stone-500 mb-1",children:"Approval Required"}),e.jsx("p",{className:"text-sm font-medium text-stone-900",children:r.approval_required?"Yes":"No"})]})]})]}),x.length>0&&e.jsxs(n,{children:[e.jsxs("h2",{className:"text-sm font-semibold text-stone-900 mb-3 flex items-center gap-2",children:[e.jsx(h,{className:"w-4 h-4 text-primary-500"})," CE Certificates (",x.length,")"]}),e.jsx("div",{className:"space-y-2",children:x.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-stone-50 rounded-xl",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-stone-900",children:s.preceptor?`${s.preceptor.first_name} ${s.preceptor.last_name}`:"Unknown Preceptor"}),e.jsxs("p",{className:"text-xs text-stone-500",children:[s.contact_hours," contact hours"]})]}),e.jsx(i,{variant:u[s.status]||"default",size:"sm",children:s.status})]},s.id))})]}),a?.program_performance&&a.program_performance.length>0&&e.jsxs(n,{children:[e.jsxs("h2",{className:"text-sm font-semibold text-stone-900 mb-3 flex items-center gap-2",children:[e.jsx(U,{className:"w-4 h-4 text-primary-500"})," Program Performance"]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-xs text-stone-500 border-b border-stone-100",children:[e.jsx("th",{className:"text-left py-2 pr-4 font-medium",children:"Program"}),e.jsx("th",{className:"text-right py-2 px-3 font-medium",children:"Students"}),e.jsx("th",{className:"text-left py-2 px-3 font-medium min-w-[140px]",children:"Avg Hours Progress"}),e.jsx("th",{className:"text-right py-2 pl-3 font-medium",children:"Completion"})]})}),e.jsx("tbody",{children:a.program_performance.map(s=>{const o=s.required_hours>0?Math.min(100,s.avg_hours_completed/s.required_hours*100):0;return e.jsxs("tr",{className:"border-b border-stone-50",children:[e.jsx("td",{className:"py-3 pr-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-stone-900",children:s.name}),e.jsx("span",{className:`px-1.5 py-0.5 rounded text-[10px] font-medium ${j[s.degree_type]||"bg-stone-100 text-stone-700"}`,children:s.degree_type})]})}),e.jsx("td",{className:"text-right py-3 px-3 text-stone-600",children:s.student_count}),e.jsx("td",{className:"py-3 px-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex-1 h-2 bg-stone-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-primary-400 to-primary-500 rounded-full",style:{width:`${o}%`}})}),e.jsxs("span",{className:"text-xs text-stone-500 w-20 text-right",children:[s.avg_hours_completed,"/",s.required_hours,"h"]})]})}),e.jsx("td",{className:"text-right py-3 pl-3",children:e.jsxs("span",{className:`text-xs font-semibold ${s.completion_rate>=50?"text-green-600":s.completion_rate>=25?"text-amber-600":"text-stone-500"}`,children:[s.completion_rate,"%"]})})]},s.id)})})]})})]}),a?.agreement_summary&&e.jsxs(n,{children:[e.jsxs("h2",{className:"text-sm font-semibold text-stone-900 mb-3 flex items-center gap-2",children:[e.jsx(d,{className:"w-4 h-4 text-primary-500"})," Agreement Health"]}),a.agreement_summary.expiring_soon>0&&e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-amber-50 border border-amber-200 rounded-xl mb-3",children:[e.jsx(L,{className:"w-4 h-4 text-amber-600 shrink-0"}),e.jsxs("p",{className:"text-xs text-amber-700 font-medium",children:[a.agreement_summary.expiring_soon," agreement",a.agreement_summary.expiring_soon!==1?"s":""," expiring within 30 days"]})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[{label:"Active",value:a.agreement_summary.active,color:"text-green-600 bg-green-50"},{label:"Pending",value:a.agreement_summary.pending,color:"text-amber-600 bg-amber-50"},{label:"Expiring Soon",value:a.agreement_summary.expiring_soon,color:"text-orange-600 bg-orange-50"},{label:"Expired",value:a.agreement_summary.expired,color:"text-red-600 bg-red-50"}].map(s=>e.jsxs("div",{className:`rounded-xl p-3 text-center ${s.color}`,children:[e.jsx("p",{className:"text-2xl font-bold",children:s.value}),e.jsx("p",{className:"text-xs font-medium mt-0.5",children:s.label})]},s.label))})]}),a?.student_overview&&e.jsxs(n,{children:[e.jsxs("h2",{className:"text-sm font-semibold text-stone-900 mb-3 flex items-center gap-2",children:[e.jsx(O,{className:"w-4 h-4 text-primary-500"})," Student Overview"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[e.jsxs("div",{className:"bg-stone-50 rounded-xl p-4 text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-stone-900",children:a.student_overview.total_enrolled}),e.jsx("p",{className:"text-xs text-stone-500 mt-0.5",children:"Total Enrolled"})]}),e.jsxs("div",{className:"bg-stone-50 rounded-xl p-4 text-center",children:[e.jsxs("p",{className:"text-2xl font-bold text-stone-900",children:[a.student_overview.avg_hours_progress,"h"]}),e.jsx("p",{className:"text-xs text-stone-500 mt-0.5",children:"Avg Hours Completed"})]}),e.jsxs("div",{className:"bg-stone-50 rounded-xl p-4 text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-green-600",children:a.student_overview.nearing_completion}),e.jsx("p",{className:"text-xs text-stone-500 mt-0.5",children:"Nearing Completion (80%+)"})]})]})]})]})}export{Q as UniversityDetail};
