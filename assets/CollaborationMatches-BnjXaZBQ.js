import{a as C,r as l,cE as h,j as e,U as M,S,f as g,w as k,X as j,t as u,g as P}from"./index-GzcG7CSS.js";import{u as q}from"./usePageTitle-CSRQyC0a.js";import{M as N}from"./map-pin-B8WKBtoC.js";import{S as A}from"./star-CqpiQmYF.js";import{C as b}from"./circle-check-big-B5eOtT2b.js";function F(){q("Collaboration Matches");const{user:f}=C(),[c,v]=l.useState([]),[w,d]=l.useState(!0),[r,o]=l.useState(null);l.useEffect(()=>{x()},[]);const x=()=>{d(!0),h.listMatches().then(s=>{v(s.data||[])}).catch(()=>{}).finally(()=>d(!1))},m=async(s,n)=>{o(s);try{await h.respondToMatch(s,n),u.success(n==="accepted"?"Match accepted!":"Match declined"),x()}catch{u.error("Failed to respond to match")}finally{o(null)}},p={pending:{bg:"bg-amber-100 text-amber-700",icon:e.jsx(P,{className:"w-3.5 h-3.5"})},accepted:{bg:"bg-emerald-100 text-emerald-700",icon:e.jsx(b,{className:"w-3.5 h-3.5"})},declined:{bg:"bg-red-100 text-red-700",icon:e.jsx(j,{className:"w-3.5 h-3.5"})}},a=f?.role==="preceptor";return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-stone-900",children:"Collaboration Matches"}),e.jsx("p",{className:"text-stone-500 mt-1",children:a?"Review incoming match requests from NPs/PAs":"Track your matches with supervising physicians"})]}),w?e.jsx("div",{className:"space-y-4",children:[1,2,3].map(s=>e.jsx("div",{className:"bg-white rounded-2xl border border-stone-200 p-6 animate-pulse",children:e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-stone-200"}),e.jsxs("div",{className:"space-y-2 flex-1",children:[e.jsx("div",{className:"h-4 bg-stone-200 rounded w-1/3"}),e.jsx("div",{className:"h-3 bg-stone-100 rounded w-1/4"})]})]})},s))}):c.length===0?e.jsxs("div",{className:"bg-white rounded-2xl border border-stone-200 p-12 text-center",children:[e.jsx(M,{className:"w-12 h-12 text-stone-300 mx-auto mb-4"}),e.jsx("h3",{className:"font-semibold text-stone-700 mb-1",children:"No Matches Yet"}),e.jsx("p",{className:"text-sm text-stone-500",children:a?"You'll see incoming match requests here once NPs/PAs are matched with your profile":"Create a collaboration request to start receiving physician matches"})]}):e.jsx("div",{className:"space-y-4",children:c.map(s=>{const n=p[s.status]||p.pending,t=s.physician_profile,i=s.request;return e.jsxs("div",{className:"bg-white rounded-2xl border border-stone-200 p-6 hover:shadow-md transition-all",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-indigo-500 to-purple-500 flex items-center justify-center text-white font-bold text-lg flex-shrink-0",children:a?i?.specialty?.[0]||"?":`${t?.first_name?.[0]||""}${t?.last_name?.[0]||""}`}),e.jsx("div",{children:a?e.jsxs(e.Fragment,{children:[e.jsxs("h3",{className:"font-semibold text-stone-900",children:[i?.specialty||"Unknown"," â€” ",i?.profession_type?.toUpperCase()]}),e.jsxs("div",{className:"flex items-center gap-3 text-sm text-stone-500 mt-0.5",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(N,{className:"w-3.5 h-3.5"})," ",i?.states_requested?.join(", ")]}),e.jsx("span",{className:"capitalize",children:i?.practice_model?.replace("_"," ")})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("h3",{className:"font-semibold text-stone-900",children:["Dr. ",t?.first_name," ",t?.last_name]}),e.jsxs("div",{className:"flex items-center gap-3 text-sm text-stone-500 mt-0.5",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(N,{className:"w-3.5 h-3.5"})," ",t?.licensed_states?.join(", ")]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(S,{className:"w-3.5 h-3.5"})," ",t?.specialties?.slice(0,2).join(", ")]})]})]})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1 bg-indigo-50 text-indigo-700 px-2 py-1 rounded-lg text-xs font-medium",children:[e.jsx(A,{className:"w-3 h-3"})," ",s.match_score,"%"]}),e.jsxs("div",{className:`flex items-center gap-1 px-2 py-1 rounded-lg text-xs font-medium ${n.bg}`,children:[n.icon," ",s.status]})]})]}),s.match_reasons.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1.5 mt-3",children:s.match_reasons.map((y,_)=>e.jsx("span",{className:"text-xs bg-stone-100 text-stone-600 px-2 py-0.5 rounded-lg",children:y},_))}),a&&s.status==="pending"&&e.jsxs("div",{className:"flex gap-3 mt-4 pt-4 border-t border-stone-100",children:[e.jsxs(g,{size:"sm",onClick:()=>m(s.id,"accepted"),disabled:r===s.id,className:"!rounded-xl bg-emerald-600 hover:bg-emerald-700",children:[r===s.id?e.jsx(k,{className:"w-4 h-4 animate-spin"}):e.jsx(b,{className:"w-4 h-4"})," Accept"]}),e.jsxs(g,{size:"sm",variant:"outline",onClick:()=>m(s.id,"declined"),disabled:r===s.id,className:"!rounded-xl text-red-600 border-red-200 hover:bg-red-50",children:[e.jsx(j,{className:"w-4 h-4"})," Decline"]})]}),s.responded_at&&e.jsxs("p",{className:"text-xs text-stone-400 mt-3",children:["Responded ",new Date(s.responded_at).toLocaleDateString()]})]},s.id)})})]})}export{F as default};
