import{u as oe,r as i,bd as ce,ab as de,c1 as me,j as e,f as d,d as xe,G as O,B as F,l as he,g as pe,T as V,c2 as ue,aJ as X,bb as H,c3 as je,v as ge,X as q,t as fe}from"./index-GzcG7CSS.js";import{C as D}from"./Card-FSc1waky.js";import{G as ve}from"./GradientAvatar-AwIYZPqW.js";import{E as Ne}from"./EmptyState-A3BIGBYI.js";import{T as be}from"./Skeleton-CErRX1HU.js";import{B as ye}from"./Badge-9_pL70Ln.js";import{M as P}from"./Modal-CA0K5bCb.js";import{u as we}from"./usePageTitle-CSRQyC0a.js";import{U as K}from"./upload-DVvKjw19.js";import{U as Q}from"./user-plus-CC3Tiyyp.js";import{T as Ce,a as _e}from"./toggle-right-DQcBUSPe.js";import{S as ke}from"./shield-off-fUO5c9OY.js";import{C as Se}from"./circle-check-DXK6A2lJ.js";import{E as Ue}from"./eye-DPEVXjN5.js";import{C as Ae}from"./chevron-left-Be6DhBVQ.js";import{C as Ee}from"./chevron-right-D8jrJqqK.js";import{S as Re}from"./shield-B4OQBYN4.js";import{M as W}from"./map-pin-B8WKBtoC.js";import{M as I}from"./mail-BeMqAM3p.js";import{T as Pe}from"./triangle-alert-DWR7AhnE.js";const T=["student","preceptor","site_manager","coordinator","professor","admin"],R={student:"Student",preceptor:"Preceptor",site_manager:"Site Manager",coordinator:"Coordinator",professor:"Professor",admin:"Admin"},Me={student:"primary",preceptor:"secondary",site_manager:"warning",coordinator:"success",professor:"default",admin:"danger"};function ts(){we("User Management");const p=oe(),[n,x]=i.useState(""),[u,y]=i.useState(""),[j,f]=i.useState(1),[g,v]=i.useState(null),[h,w]=i.useState(null),[r,N]=i.useState(""),[k,b]=i.useState(!1),[S,U]=i.useState(!1),{data:o,isLoading:t}=ce({search:n||void 0,role:u||void 0,page:j}),l=o?.data||[],C=o?.last_page||1,z=o?.total||0,A=de(),E=me(),B=async(a,m)=>{m.stopPropagation(),await A.mutateAsync({id:a.id,data:{is_active:!a.is_active}})},$=async()=>{!h||!r||(await A.mutateAsync({id:h.id,data:{role:r}}),w(null))},M=async()=>{g&&(await E.mutateAsync(g.id),v(null))};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-stone-900",children:"User Management"}),e.jsxs("p",{className:"text-stone-500 mt-1",children:["Manage all platform users (",z," total)"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(d,{variant:"outline",onClick:()=>U(!0),children:[e.jsx(K,{className:"w-4 h-4 mr-2"})," Bulk Invite"]}),e.jsxs(d,{onClick:()=>b(!0),children:[e.jsx(Q,{className:"w-4 h-4 mr-2"})," Add User"]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(xe,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-stone-400"}),e.jsx("input",{type:"text",placeholder:"Search by name, email, username...",value:n,onChange:a=>{x(a.target.value),f(1)},className:"w-full pl-10 pr-4 py-2.5 rounded-xl border border-stone-300 bg-white text-sm focus:border-primary-500 focus:ring-2 focus:ring-primary-500/20 focus:outline-none"})]}),e.jsxs("select",{value:u,onChange:a=>{y(a.target.value),f(1)},className:"px-4 py-2.5 rounded-xl border border-stone-300 bg-white text-sm focus:border-primary-500 focus:ring-2 focus:ring-primary-500/20 focus:outline-none",children:[e.jsx("option",{value:"",children:"All Roles"}),T.map(a=>e.jsx("option",{value:a,children:R[a]},a))]})]}),t?e.jsx(D,{padding:"none",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsx("table",{className:"w-full",children:e.jsx("tbody",{children:Array.from({length:8}).map((a,m)=>e.jsx(be,{cols:6},m))})})})}):l.length===0?e.jsx(D,{children:e.jsx(Ne,{illustration:"users",title:"No users found",description:"Try adjusting your search or filters."})}):e.jsx(D,{padding:"none",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-stone-200 bg-stone-50",children:[e.jsx("th",{className:"text-left text-xs font-semibold text-stone-500 uppercase px-4 py-3",children:"User"}),e.jsx("th",{className:"text-left text-xs font-semibold text-stone-500 uppercase px-4 py-3",children:"Role"}),e.jsx("th",{className:"text-left text-xs font-semibold text-stone-500 uppercase px-4 py-3",children:"Status"}),e.jsx("th",{className:"text-left text-xs font-semibold text-stone-500 uppercase px-4 py-3 hidden md:table-cell",children:"MFA"}),e.jsx("th",{className:"text-left text-xs font-semibold text-stone-500 uppercase px-4 py-3 hidden md:table-cell",children:"Onboarding"}),e.jsx("th",{className:"text-left text-xs font-semibold text-stone-500 uppercase px-4 py-3 hidden sm:table-cell",children:"Joined"}),e.jsx("th",{className:"text-right text-xs font-semibold text-stone-500 uppercase px-4 py-3",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-stone-100",children:l.map(a=>e.jsxs("tr",{className:"table-row-hover cursor-pointer",onClick:()=>p(`/admin/users/${a.id}`),children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ve,{name:`${a.first_name} ${a.last_name}`,size:"sm"}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium text-stone-900",children:[a.first_name," ",a.last_name]}),e.jsx("p",{className:"text-xs text-stone-500",children:a.email})]})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{children:[e.jsx("button",{onClick:m=>{m.stopPropagation(),w(a),N(a.role)},children:e.jsx(ye,{variant:Me[a.role]||"default",size:"sm",children:R[a.role]||a.role})}),a.affiliation&&e.jsxs("p",{className:"flex items-center gap-1.5 text-xs text-stone-500 mt-1",children:[["student","coordinator","professor"].includes(a.role)?e.jsx(O,{className:"w-3.5 h-3.5 text-stone-400 shrink-0"}):e.jsx(F,{className:"w-3.5 h-3.5 text-stone-400 shrink-0"}),e.jsx("span",{className:"truncate max-w-[160px]",children:a.affiliation})]})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("button",{onClick:m=>B(a,m),className:"flex items-center gap-1.5 text-sm",title:a.is_active?"Click to deactivate":"Click to activate",children:a.is_active?e.jsxs(e.Fragment,{children:[e.jsx(Ce,{className:"w-5 h-5 text-green-500"}),e.jsx("span",{className:"text-green-600",children:"Active"})]}):e.jsxs(e.Fragment,{children:[e.jsx(_e,{className:"w-5 h-5 text-stone-400"}),e.jsx("span",{className:"text-stone-400",children:"Inactive"})]})})}),e.jsx("td",{className:"px-4 py-3 hidden md:table-cell",children:a.mfa_enabled?e.jsxs("span",{className:"flex items-center gap-1 text-xs text-green-600",children:[e.jsx(he,{className:"w-3.5 h-3.5"}),"On"]}):e.jsxs("span",{className:"flex items-center gap-1 text-xs text-stone-400",children:[e.jsx(ke,{className:"w-3.5 h-3.5"}),"Off"]})}),e.jsx("td",{className:"px-4 py-3 hidden md:table-cell",children:a.onboarding_completed_at?e.jsxs("span",{className:"flex items-center gap-1 text-xs text-green-600",children:[e.jsx(Se,{className:"w-3.5 h-3.5"}),"Done"]}):e.jsxs("span",{className:"flex items-center gap-1 text-xs text-amber-500",children:[e.jsx(pe,{className:"w-3.5 h-3.5"}),"Pending"]})}),e.jsx("td",{className:"px-4 py-3 text-sm text-stone-500 hidden sm:table-cell",children:new Date(a.created_at).toLocaleDateString()}),e.jsx("td",{className:"px-4 py-3 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-1",children:[e.jsx("button",{onClick:m=>{m.stopPropagation(),p(`/admin/users/${a.id}`)},className:"p-1.5 rounded-lg text-stone-400 hover:text-primary-500 hover:bg-primary-50 transition-colors",title:"View details",children:e.jsx(Ue,{className:"w-4 h-4"})}),e.jsx("button",{onClick:m=>{m.stopPropagation(),v(a)},className:"p-1.5 rounded-lg text-stone-400 hover:text-red-500 hover:bg-red-50 transition-colors",title:"Delete user",children:e.jsx(V,{className:"w-4 h-4"})})]})})]},a.id))})]})})}),C>1&&e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(d,{variant:"outline",size:"sm",disabled:j<=1,onClick:()=>f(a=>a-1),children:e.jsx(Ae,{className:"w-4 h-4"})}),e.jsxs("span",{className:"text-sm text-stone-600",children:["Page ",j," of ",C]}),e.jsx(d,{variant:"outline",size:"sm",disabled:j>=C,onClick:()=>f(a=>a+1),children:e.jsx(Ee,{className:"w-4 h-4"})})]}),h&&e.jsx(P,{isOpen:!0,onClose:()=>w(null),title:"Change User Role",size:"sm",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("p",{className:"text-sm text-stone-600",children:["Changing role for ",e.jsxs("strong",{children:[h.first_name," ",h.last_name]})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"block text-sm font-medium text-stone-700",children:"New Role"}),e.jsx("select",{value:r,onChange:a=>N(a.target.value),className:"w-full rounded-xl border border-stone-300 bg-white px-4 py-2.5 text-sm focus:border-primary-500 focus:ring-2 focus:ring-primary-500/20 focus:outline-none",children:T.map(a=>e.jsx("option",{value:a,children:R[a]},a))})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(d,{variant:"outline",onClick:()=>w(null),children:"Cancel"}),e.jsxs(d,{onClick:$,isLoading:A.isPending,children:[e.jsx(Re,{className:"w-4 h-4 mr-2"})," Update Role"]})]})]})}),g&&e.jsx(P,{isOpen:!0,onClose:()=>v(null),title:"Delete User",size:"sm",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("p",{className:"text-sm text-stone-600",children:["Are you sure you want to delete ",e.jsxs("strong",{children:[g.first_name," ",g.last_name]}),"? This action cannot be undone."]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(d,{variant:"outline",onClick:()=>v(null),children:"Cancel"}),e.jsxs(d,{variant:"danger",onClick:M,isLoading:E.isPending,children:[e.jsx(V,{className:"w-4 h-4 mr-2"})," Delete"]})]})]})}),k&&e.jsx(Le,{onClose:()=>b(!1)}),S&&e.jsx(Te,{onClose:()=>U(!1)})]})}function Le({onClose:p}){const[n,x]=i.useState({first_name:"",last_name:"",email:"",username:"",phone:"",role:"student",university_id:"",program_id:"",site_ids:[]}),[u,y]=i.useState(""),j=ue(),{data:f}=X(),{data:g}=H(),v=f?.data||[],h=g?.data||[],r=v.find(t=>t.id===n.university_id)?.programs||[],N=["student","coordinator","professor","preceptor"].includes(n.role),k=n.role==="student"&&n.university_id,b=["site_manager","preceptor"].includes(n.role),S=async()=>{if(y(""),!n.first_name||!n.last_name||!n.email||!n.role){y("First name, last name, email, and role are required.");return}try{await j.mutateAsync({first_name:n.first_name,last_name:n.last_name,email:n.email,role:n.role,username:n.username||void 0,phone:n.phone||void 0,university_id:N&&n.university_id?n.university_id:void 0,program_id:k&&n.program_id?n.program_id:void 0,site_ids:b&&n.site_ids.length>0?n.site_ids:void 0}),p()}catch(t){const l=t instanceof Error?t.message:"Failed to create user.";y(l)}},U=t=>{x(l=>({...l,site_ids:l.site_ids.includes(t)?l.site_ids.filter(C=>C!==t):[...l.site_ids,t]}))},o="w-full rounded-xl border border-stone-300 bg-white px-4 py-2.5 text-sm focus:border-primary-500 focus:ring-2 focus:ring-primary-500/20 focus:outline-none";return e.jsx(P,{isOpen:!0,onClose:p,title:"Add New User",size:"lg",children:e.jsxs("div",{className:"space-y-4",children:[u&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl px-4 py-3 text-sm text-red-700",children:u}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-stone-700 mb-1",children:"First Name *"}),e.jsx("input",{className:o,value:n.first_name,onChange:t=>x(l=>({...l,first_name:t.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-stone-700 mb-1",children:"Last Name *"}),e.jsx("input",{className:o,value:n.last_name,onChange:t=>x(l=>({...l,last_name:t.target.value}))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-stone-700 mb-1",children:"Email *"}),e.jsx("input",{type:"email",className:o,value:n.email,onChange:t=>x(l=>({...l,email:t.target.value}))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-stone-700 mb-1",children:"Username"}),e.jsx("input",{className:o,placeholder:"lowercase, no spaces",value:n.username,onChange:t=>x(l=>({...l,username:t.target.value.toLowerCase().replace(/[^a-z0-9._-]/g,"")}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-stone-700 mb-1",children:"Phone"}),e.jsx("input",{className:o,value:n.phone,onChange:t=>x(l=>({...l,phone:t.target.value}))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-stone-700 mb-1",children:"Role *"}),e.jsx("select",{className:o,value:n.role,onChange:t=>x(l=>({...l,role:t.target.value,university_id:"",program_id:"",site_ids:[]})),children:T.map(t=>e.jsx("option",{value:t,children:R[t]},t))})]}),N&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-stone-700 mb-1",children:[e.jsx(F,{className:"w-3.5 h-3.5 inline mr-1"}),"University"]}),e.jsxs("select",{className:o,value:n.university_id,onChange:t=>x(l=>({...l,university_id:t.target.value,program_id:""})),children:[e.jsx("option",{value:"",children:"Select university..."}),v.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]}),k&&r.length>0&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-stone-700 mb-1",children:[e.jsx(O,{className:"w-3.5 h-3.5 inline mr-1"}),"Program"]}),e.jsxs("select",{className:o,value:n.program_id,onChange:t=>x(l=>({...l,program_id:t.target.value})),children:[e.jsx("option",{value:"",children:"Select program..."}),r.map(t=>e.jsxs("option",{value:t.id,children:[t.name," (",t.degree_type,")"]},t.id))]})]}),b&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-stone-700 mb-1",children:[e.jsx(W,{className:"w-3.5 h-3.5 inline mr-1"}),n.role==="site_manager"?"Sites to Manage":"Associated Sites"]}),e.jsxs("div",{className:"max-h-40 overflow-y-auto border border-stone-200 rounded-xl divide-y divide-stone-100",children:[h.map(t=>e.jsxs("label",{className:"flex items-center gap-3 px-4 py-2.5 hover:bg-stone-50 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:n.site_ids.includes(t.id),onChange:()=>U(t.id),className:"rounded border-stone-300 text-primary-500 focus:ring-primary-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-stone-900",children:t.name}),e.jsxs("p",{className:"text-xs text-stone-500",children:[t.city,", ",t.state]})]})]},t.id)),h.length===0&&e.jsx("p",{className:"px-4 py-3 text-sm text-stone-400",children:"No sites available"})]})]}),e.jsxs("div",{className:"bg-stone-50 rounded-xl p-3 text-xs text-stone-500",children:[e.jsx(I,{className:"w-3.5 h-3.5 inline mr-1"}),"A welcome email with a password setup link will be sent to the user."]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[e.jsx(d,{variant:"outline",onClick:p,children:"Cancel"}),e.jsxs(d,{onClick:S,isLoading:j.isPending,children:[e.jsx(Q,{className:"w-4 h-4 mr-2"})," Create User"]})]})]})})}function Te({onClose:p}){const[n,x]=i.useState("student"),[u,y]=i.useState(""),[j,f]=i.useState(""),[g,v]=i.useState([]),[h,w]=i.useState(""),[r,N]=i.useState([]),[k,b]=i.useState(""),[S,U]=i.useState(null),[o,t]=i.useState(null),l=i.useRef(null),C=je(),{data:z}=X(),{data:A}=H(),E=z?.data||[],B=A?.data||[],M=E.find(s=>s.id===u)?.programs||[],a=["student","coordinator","professor","preceptor"].includes(n),m=n==="student"&&u,G=["site_manager","preceptor"].includes(n),L="w-full rounded-xl border border-stone-300 bg-white px-4 py-2.5 text-sm focus:border-primary-500 focus:ring-2 focus:ring-primary-500/20 focus:outline-none",Y=/[a-zA-Z0-9._%+\-]+@[a-zA-Z0-9.\-]+\.[a-zA-Z]{2,}/g,Z=s=>{const c=s.match(Y)||[];return[...new Set(c.map(_=>_.toLowerCase()))]},J=()=>{const s=Z(h);N(c=>[...new Set([...c,...s])]),w("")},ee=s=>{const c=s.target.files?.[0];if(!c)return;const _=new FileReader;_.onload=ne=>{const le=ne.target?.result,ie=Z(le);N(re=>[...new Set([...re,...ie])])},_.readAsText(c),l.current&&(l.current.value="")},se=s=>{N(c=>c.filter(_=>_!==s))},te=async()=>{if(b(""),r.length===0){b("Add at least one email address.");return}if(r.length>200){b("Maximum 200 emails per batch.");return}try{const s=await C.mutateAsync({emails:r,role:n,university_id:a&&u?u:void 0,program_id:m&&j?j:void 0,site_ids:G&&g.length>0?g:void 0});U(s.results),t(s.summary),fe.success(s.message)}catch(s){const c=s instanceof Error?s.message:"Bulk invite failed.";b(c)}},ae=s=>{v(c=>c.includes(s)?c.filter(_=>_!==s):[...c,s])};return S&&o?e.jsx(P,{isOpen:!0,onClose:p,title:"Bulk Invite Results",size:"lg",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{className:"bg-green-50 rounded-xl p-3 text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-green-700",children:o.sent}),e.jsx("p",{className:"text-xs text-green-600",children:"Sent"})]}),e.jsxs("div",{className:"bg-amber-50 rounded-xl p-3 text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-amber-700",children:o.skipped}),e.jsx("p",{className:"text-xs text-amber-600",children:"Skipped"})]}),e.jsxs("div",{className:"bg-red-50 rounded-xl p-3 text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-red-700",children:o.failed}),e.jsx("p",{className:"text-xs text-red-600",children:"Failed"})]})]}),e.jsx("div",{className:"max-h-60 overflow-y-auto border border-stone-200 rounded-xl divide-y divide-stone-100",children:S.map((s,c)=>e.jsxs("div",{className:"flex items-center justify-between px-4 py-2.5",children:[e.jsx("span",{className:"text-sm text-stone-700",children:s.email}),e.jsxs("div",{className:"flex items-center gap-2",children:[s.status==="sent"&&e.jsx(ge,{className:"w-4 h-4 text-green-500"}),s.status==="skipped"&&e.jsx(Pe,{className:"w-4 h-4 text-amber-500"}),s.status==="failed"&&e.jsx(q,{className:"w-4 h-4 text-red-500"}),e.jsxs("span",{className:`text-xs font-medium ${s.status==="sent"?"text-green-600":s.status==="skipped"?"text-amber-600":"text-red-600"}`,children:[s.status,s.reason?` â€” ${s.reason}`:""]})]})]},c))}),e.jsx("div",{className:"flex justify-end",children:e.jsx(d,{onClick:p,children:"Done"})})]})}):e.jsx(P,{isOpen:!0,onClose:p,title:"Bulk Invite Users",size:"lg",children:e.jsxs("div",{className:"space-y-4",children:[k&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl px-4 py-3 text-sm text-red-700",children:k}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-stone-700 mb-1",children:"Role *"}),e.jsx("select",{className:L,value:n,onChange:s=>{x(s.target.value),y(""),f(""),v([])},children:T.map(s=>e.jsx("option",{value:s,children:R[s]},s))})]}),a&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-stone-700 mb-1",children:[e.jsx(F,{className:"w-3.5 h-3.5 inline mr-1"})," University"]}),e.jsxs("select",{className:L,value:u,onChange:s=>{y(s.target.value),f("")},children:[e.jsx("option",{value:"",children:"Select university..."}),E.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})]}),m&&M.length>0&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-stone-700 mb-1",children:[e.jsx(O,{className:"w-3.5 h-3.5 inline mr-1"})," Program"]}),e.jsxs("select",{className:L,value:j,onChange:s=>f(s.target.value),children:[e.jsx("option",{value:"",children:"Select program..."}),M.map(s=>e.jsxs("option",{value:s.id,children:[s.name," (",s.degree_type,")"]},s.id))]})]}),G&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-stone-700 mb-1",children:[e.jsx(W,{className:"w-3.5 h-3.5 inline mr-1"}),n==="site_manager"?"Sites to Manage":"Associated Sites"]}),e.jsx("div",{className:"max-h-32 overflow-y-auto border border-stone-200 rounded-xl divide-y divide-stone-100",children:B.map(s=>e.jsxs("label",{className:"flex items-center gap-3 px-4 py-2 hover:bg-stone-50 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:g.includes(s.id),onChange:()=>ae(s.id),className:"rounded border-stone-300 text-primary-500 focus:ring-primary-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-stone-900",children:s.name}),e.jsxs("p",{className:"text-xs text-stone-500",children:[s.city,", ",s.state]})]})]},s.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-stone-700 mb-1",children:"Email Addresses"}),e.jsx("textarea",{className:L+" min-h-[80px]",placeholder:"Enter emails separated by commas, spaces, or new lines...",value:h,onChange:s=>w(s.target.value),onBlur:J}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(d,{variant:"outline",size:"sm",onClick:J,disabled:!h.trim(),children:"Add Emails"}),e.jsx("span",{className:"text-xs text-stone-400",children:"or"}),e.jsxs(d,{variant:"outline",size:"sm",onClick:()=>l.current?.click(),children:[e.jsx(K,{className:"w-3.5 h-3.5 mr-1"})," Upload CSV"]}),e.jsx("input",{ref:l,type:"file",accept:".csv,.txt",className:"hidden",onChange:ee})]})]}),r.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsxs("span",{className:"text-sm font-medium text-stone-700",children:[r.length," email",r.length!==1?"s":""," ready"]}),e.jsx("button",{onClick:()=>N([]),className:"text-xs text-red-500 hover:text-red-700",children:"Clear all"})]}),e.jsx("div",{className:"max-h-32 overflow-y-auto border border-stone-200 rounded-xl p-2 flex flex-wrap gap-1.5",children:r.map(s=>e.jsxs("span",{className:"inline-flex items-center gap-1 bg-primary-50 text-primary-700 rounded-lg px-2.5 py-1 text-xs",children:[s,e.jsx("button",{onClick:()=>se(s),className:"hover:text-red-500",children:e.jsx(q,{className:"w-3 h-3"})})]},s))})]}),e.jsxs("div",{className:"bg-stone-50 rounded-xl p-3 text-xs text-stone-500",children:[e.jsx(I,{className:"w-3.5 h-3.5 inline mr-1"}),"Each user will receive a welcome email with a password setup link. Existing users will be skipped."]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[e.jsx(d,{variant:"outline",onClick:p,children:"Cancel"}),e.jsxs(d,{onClick:te,isLoading:C.isPending,disabled:r.length===0,children:[e.jsx(I,{className:"w-4 h-4 mr-2"})," Send ",r.length," Invite",r.length!==1?"s":""]})]})]})})}export{ts as AdminUsers};
