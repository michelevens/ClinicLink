import{c as f,a4 as j,r as o,j as e,d as N,G as h,ac as v,g as b}from"./index-GzcG7CSS.js";import{C as i}from"./Card-FSc1waky.js";import{B as w}from"./Badge-9_pL70Ln.js";import{u as y}from"./usePageTitle-CSRQyC0a.js";import{C}from"./circle-check-big-B5eOtT2b.js";import{C as k}from"./circle-alert-DPVkbFxy.js";import{M as _}from"./map-pin-B8WKBtoC.js";import{U as L}from"./user-BvMymkx8.js";const P=[["path",{d:"M5 22h14",key:"ehvnwv"}],["path",{d:"M5 2h14",key:"pdyrp9"}],["path",{d:"M17 22v-4.172a2 2 0 0 0-.586-1.414L12 12l-4.414 4.414A2 2 0 0 0 7 17.828V22",key:"1d314k"}],["path",{d:"M7 2v4.172a2 2 0 0 0 .586 1.414L12 12l4.414-4.414A2 2 0 0 0 17 6.172V2",key:"1vvvr6"}]],S=f("hourglass",P);function G(){y("Placements");const{data:t,isLoading:m}=j(),n=t?.data||[],[l,p]=o.useState("active"),[r,u]=o.useState(""),a=o.useMemo(()=>({active:n.filter(s=>s.status==="accepted"),pending:n.filter(s=>s.status==="pending"||s.status==="waitlisted"),completed:n.filter(s=>s.status==="declined"||s.status==="withdrawn")}),[n]),x=o.useMemo(()=>{const s=a[l];if(!r)return s;const d=r.toLowerCase();return s.filter(c=>(c.student?.first_name+" "+c.student?.last_name).toLowerCase().includes(d)||c.slot?.title?.toLowerCase().includes(d)||c.slot?.site?.name?.toLowerCase().includes(d))},[a,l,r]),g=[{key:"active",label:"Active",count:a.active.length,icon:e.jsx(C,{className:"w-4 h-4"})},{key:"pending",label:"Pending",count:a.pending.length,icon:e.jsx(S,{className:"w-4 h-4"})},{key:"completed",label:"Closed",count:a.completed.length,icon:e.jsx(k,{className:"w-4 h-4"})}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-stone-900",children:"Placements"}),e.jsx("p",{className:"text-stone-500 mt-1",children:"Track student rotation placements across all sites"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsx(i,{padding:"sm",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-green-600",children:a.active.length}),e.jsx("p",{className:"text-xs text-stone-500",children:"Active"})]})}),e.jsx(i,{padding:"sm",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-amber-600",children:a.pending.length}),e.jsx("p",{className:"text-xs text-stone-500",children:"Pending"})]})}),e.jsx(i,{padding:"sm",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-stone-500",children:a.completed.length}),e.jsx("p",{className:"text-xs text-stone-500",children:"Closed"})]})})]}),e.jsx("div",{className:"flex gap-1 p-1 bg-stone-100 rounded-xl",children:g.map(s=>e.jsxs("button",{onClick:()=>p(s.key),className:`flex-1 flex items-center justify-center gap-2 px-4 py-2.5 rounded-lg text-sm font-medium transition-all ${l===s.key?"bg-white text-stone-900 shadow-sm":"text-stone-500 hover:text-stone-700"}`,children:[s.icon,s.label,e.jsx("span",{className:`px-1.5 py-0.5 rounded-full text-xs ${l===s.key?"bg-primary-100 text-primary-700":"bg-stone-200 text-stone-500"}`,children:s.count})]},s.key))}),e.jsxs("div",{className:"relative",children:[e.jsx(N,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-stone-400"}),e.jsx("input",{type:"text",placeholder:"Search placements...",value:r,onChange:s=>u(s.target.value),className:"w-full pl-10 pr-4 py-2.5 rounded-xl border border-stone-300 bg-white text-sm focus:border-primary-500 focus:ring-2 focus:ring-primary-500/20 focus:outline-none"})]}),m?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx("div",{className:"w-8 h-8 border-2 border-primary-500 border-t-transparent rounded-full animate-spin"})}):x.length===0?e.jsx(i,{children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(h,{className:"w-12 h-12 text-stone-300 mx-auto mb-3"}),e.jsxs("h3",{className:"text-lg font-semibold text-stone-900 mb-1",children:["No ",l," placements"]}),e.jsx("p",{className:"text-stone-500 text-sm",children:l==="active"?"No students are currently placed in rotations.":l==="pending"?"No pending placement requests.":"No closed placements."})]})}):e.jsx("div",{className:"space-y-3",children:x.map(s=>e.jsx(A,{application:s},s.id))})]})}function A({application:t}){const n={accepted:{variant:"success",label:"Active"},pending:{variant:"warning",label:"Pending"},waitlisted:{variant:"secondary",label:"Waitlisted"},declined:{variant:"danger",label:"Declined"},withdrawn:{variant:"default",label:"Withdrawn"}}[t.status]||{variant:"default",label:t.status};return e.jsx(i,{hover:!0,children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3",children:[e.jsxs("div",{className:"w-10 h-10 rounded-full bg-primary-100 flex items-center justify-center text-primary-700 font-semibold text-sm shrink-0",children:[t.student?.first_name?.[0],t.student?.last_name?.[0]]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsxs("h3",{className:"font-semibold text-stone-900 truncate",children:[t.student?.first_name," ",t.student?.last_name]}),e.jsx(w,{variant:n.variant,size:"sm",children:n.label})]}),e.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1 text-sm text-stone-500",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(h,{className:"w-3.5 h-3.5"}),t.slot?.title||"Unknown Rotation"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(_,{className:"w-3.5 h-3.5"}),t.slot?.site?.name||"Unknown Site"]}),t.slot?.start_date&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(v,{className:"w-3.5 h-3.5"}),new Date(t.slot.start_date).toLocaleDateString()," - ",t.slot.end_date?new Date(t.slot.end_date).toLocaleDateString():""]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(b,{className:"w-3.5 h-3.5"}),"Applied ",new Date(t.submitted_at).toLocaleDateString()]}),t.slot?.preceptor&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(L,{className:"w-3.5 h-3.5"}),t.slot.preceptor.first_name," ",t.slot.preceptor.last_name]})]})]})]})})}export{G as Placements};
