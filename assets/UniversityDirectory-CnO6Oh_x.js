import{a as re,u as le,r as n,aJ as ie,bf as ne,bg as ce,bh as oe,j as e,f as t,af as O,d as de,i as D,G as me,T,g as xe,b8 as he,t as h}from"./index-GzcG7CSS.js";import{C as $}from"./Card-FSc1waky.js";import{B as x}from"./Badge-9_pL70Ln.js";import{M as b}from"./Modal-CA0K5bCb.js";import{I as v}from"./Input-B5MQDJHu.js";import{u as ue}from"./usePageTitle-CSRQyC0a.js";import{L as pe}from"./layout-grid-DbvINEB5.js";import{L as ge}from"./list-NlTBPj9A.js";import{M as ve}from"./map-pin-B8WKBtoC.js";import{P as Y}from"./phone-D6Tod6__.js";import{P as E}from"./pencil-Cb-MolFd.js";import{C as je}from"./chevron-left-Be6DhBVQ.js";import{C as fe}from"./chevron-right-D8jrJqqK.js";import{G as ye}from"./globe-DMMzYTpl.js";import{C as be}from"./circle-check-DXK6A2lJ.js";const H=[{value:"FL",label:"Florida"},{value:"GA",label:"Georgia"},{value:"TX",label:"Texas"},{value:"NY",label:"New York"},{value:"CA",label:"California"},{value:"IL",label:"Illinois"},{value:"PA",label:"Pennsylvania"},{value:"NC",label:"North Carolina"},{value:"OH",label:"Ohio"},{value:"MA",label:"Massachusetts"},{value:"MD",label:"Maryland"},{value:"MI",label:"Michigan"},{value:"TN",label:"Tennessee"},{value:"WA",label:"Washington"},{value:"MN",label:"Minnesota"},{value:"CO",label:"Colorado"},{value:"VA",label:"Virginia"},{value:"AZ",label:"Arizona"},{value:"IN",label:"Indiana"},{value:"SC",label:"South Carolina"},{value:"OR",label:"Oregon"},{value:"WI",label:"Wisconsin"},{value:"CT",label:"Connecticut"},{value:"MO",label:"Missouri"},{value:"NE",label:"Nebraska"},{value:"LA",label:"Louisiana"}],L={BSN:"primary",MSN:"secondary",DNP:"success",PA:"warning",NP:"primary",DPT:"default",OTD:"default",MSW:"secondary",PharmD:"danger",other:"default"},Z={name:"",address:"",city:"",state:"",zip:"",phone:"",website:"",is_verified:!1},Ne=["BSN","MSN","DNP","PA","NP","DPT","OTD","MSW","PharmD","other"];function Ie(){ue("Universities");const{user:j}=re(),u=j?.role==="admin",c=j?.role==="coordinator",l=le(),o=c&&j?.universityId||null,[N,i]=n.useState(""),[p,J]=n.useState(""),[C,w]=n.useState(1),[r,f]=n.useState(null),[k,F]=n.useState("grid"),[X,I]=n.useState(!1),[K,P]=n.useState(!1),[_,S]=n.useState(null),[y,g]=n.useState(null),[d,m]=n.useState(Z),{data:A,isLoading:Q}=ie({search:N||void 0,state:p||void 0,page:C}),q=ne(),W=ce(),G=oe(),V=A?.data||[],M=c&&o?V.filter(s=>s.id===o):V,z=A?.last_page||1,B=A?.total||0,ee=()=>{m(Z),P(!0)},U=s=>{m({name:s.name,address:s.address||"",city:s.city||"",state:s.state||"",zip:s.zip||"",phone:s.phone||"",website:s.website||"",is_verified:s.is_verified}),S(s)},se=async s=>{s.preventDefault();try{await q.mutateAsync(d),h.success("University created successfully"),P(!1)}catch(a){h.error(a instanceof Error?a.message:"Failed to create university")}},ae=async s=>{if(s.preventDefault(),!!_)try{await W.mutateAsync({id:_.id,data:d}),h.success("University updated successfully"),S(null)}catch(a){h.error(a instanceof Error?a.message:"Failed to update university")}},te=async()=>{if(y)try{await G.mutateAsync(y.id),h.success("University deleted successfully"),g(null),r?.id===y.id&&f(null)}catch(s){h.error(s instanceof Error?s.message:"Failed to delete university")}},R=e.jsxs("div",{className:"space-y-4",children:[e.jsx(v,{label:"Name",required:!0,value:d.name,onChange:s=>m(a=>({...a,name:s.target.value})),placeholder:"University name"}),e.jsx(v,{label:"Address",value:d.address,onChange:s=>m(a=>({...a,address:s.target.value})),placeholder:"Street address"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(v,{label:"City",value:d.city,onChange:s=>m(a=>({...a,city:s.target.value})),placeholder:"City"}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"block text-sm font-medium text-stone-700",children:"State"}),e.jsxs("select",{value:d.state,onChange:s=>m(a=>({...a,state:s.target.value})),className:"w-full rounded-xl border border-stone-300 bg-white px-4 py-2.5 text-sm focus:border-primary-500 focus:ring-2 focus:ring-primary-500/20 focus:outline-none",children:[e.jsx("option",{value:"",children:"Select state"}),H.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(v,{label:"ZIP",value:d.zip,onChange:s=>m(a=>({...a,zip:s.target.value})),placeholder:"ZIP code"}),e.jsx(v,{label:"Phone",value:d.phone,onChange:s=>m(a=>({...a,phone:s.target.value})),placeholder:"(555) 555-5555"})]}),e.jsx(v,{label:"Website",type:"url",value:d.website,onChange:s=>m(a=>({...a,website:s.target.value})),placeholder:"https://..."}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:d.is_verified,onChange:s=>m(a=>({...a,is_verified:s.target.checked})),className:"rounded border-stone-300 text-primary-500 focus:ring-primary-500"}),e.jsx("span",{className:"text-sm font-medium text-stone-700",children:"Verified university"})]})]});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-stone-900",children:c?"My University":"University Directory"}),e.jsx("p",{className:"text-stone-500 mt-1",children:c?"Your university and healthcare programs":`Browse ${B>0?`${B} `:""}universities and their healthcare programs`})]}),e.jsxs("div",{className:"flex gap-2",children:[c&&o&&e.jsxs(t,{onClick:()=>I(!0),children:[e.jsx(O,{className:"w-4 h-4 mr-1.5"})," Add Program"]}),u&&e.jsxs(t,{onClick:ee,children:[e.jsx(O,{className:"w-4 h-4 mr-1.5"})," Add University"]})]})]}),X&&o&&e.jsx(Ce,{universityId:o,onClose:()=>I(!1)}),!c&&e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(de,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-stone-400"}),e.jsx("input",{type:"text",placeholder:"Search by university name...",value:N,onChange:s=>{i(s.target.value),w(1)},className:"w-full pl-10 pr-4 py-2.5 rounded-xl border border-stone-300 bg-white text-sm focus:border-primary-500 focus:ring-2 focus:ring-primary-500/20 focus:outline-none"})]}),e.jsxs("select",{value:p,onChange:s=>{J(s.target.value),w(1)},className:"px-4 py-2.5 rounded-xl border border-stone-300 bg-white text-sm focus:border-primary-500 focus:ring-2 focus:ring-primary-500/20 focus:outline-none",children:[e.jsx("option",{value:"",children:"All States"}),H.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>F("grid"),className:`p-2.5 rounded-xl border transition-colors ${k==="grid"?"bg-primary-50 text-primary-600 border-primary-200":"text-stone-400 hover:text-stone-600 border-stone-300"}`,children:e.jsx(pe,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>F("table"),className:`p-2.5 rounded-xl border transition-colors ${k==="table"?"bg-primary-50 text-primary-600 border-primary-200":"text-stone-400 hover:text-stone-600 border-stone-300"}`,children:e.jsx(ge,{className:"w-4 h-4"})})]})]}),Q?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx("div",{className:"w-8 h-8 border-2 border-primary-500 border-t-transparent rounded-full animate-spin"})}):M.length===0?e.jsx($,{children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(D,{className:"w-12 h-12 text-stone-300 mx-auto mb-3"}),e.jsx("h3",{className:"text-lg font-semibold text-stone-900 mb-1",children:"No universities found"}),e.jsx("p",{className:"text-stone-500 text-sm",children:"Try adjusting your search or filters."})]})}):k==="grid"?e.jsx("div",{className:"grid gap-4 sm:grid-cols-2",children:M.map(s=>e.jsx($,{hover:!0,children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-primary-100 to-secondary-100 text-primary-600 flex items-center justify-center shrink-0",children:e.jsx(me,{className:"w-6 h-6"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsx("h3",{className:"font-semibold text-stone-900 truncate",children:s.name}),s.is_verified&&e.jsx(x,{variant:"success",size:"sm",children:"Verified"})]}),e.jsxs("p",{className:"text-xs text-stone-500 flex items-center gap-1 mt-0.5",children:[e.jsx(ve,{className:"w-3 h-3"})," ",s.city,", ",s.state]})]})]}),s.programs&&s.programs.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-1",children:[s.programs.slice(0,4).map(a=>e.jsx(x,{variant:L[a.degree_type]||"default",size:"sm",children:a.degree_type},a.id)),s.programs.length>4&&e.jsxs(x,{variant:"default",size:"sm",children:["+",s.programs.length-4]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-1",children:[e.jsxs("div",{className:"flex gap-3 text-xs text-stone-500",children:[s.phone&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Y,{className:"w-3.5 h-3.5"})," ",s.phone]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(D,{className:"w-3.5 h-3.5"})," ",s.programs?.length||0," programs"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[u&&e.jsxs(e.Fragment,{children:[e.jsx(t,{variant:"ghost",size:"sm",onClick:()=>U(s),children:e.jsx(E,{className:"w-3.5 h-3.5"})}),e.jsx(t,{variant:"ghost",size:"sm",onClick:()=>g(s),children:e.jsx(T,{className:"w-3.5 h-3.5 text-red-500"})})]}),e.jsx(t,{variant:"ghost",size:"sm",onClick:()=>l(`/universities/${s.id}`),children:"Details"})]})]})]})},s.id))}):e.jsx("div",{className:"overflow-x-auto rounded-xl border border-stone-200",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-stone-50 border-b border-stone-200",children:[e.jsx("th",{className:"text-left px-4 py-3 font-medium text-stone-600",children:"Name"}),e.jsx("th",{className:"text-left px-4 py-3 font-medium text-stone-600",children:"Location"}),e.jsx("th",{className:"text-left px-4 py-3 font-medium text-stone-600",children:"Programs"}),e.jsx("th",{className:"text-left px-4 py-3 font-medium text-stone-600",children:"Phone"}),e.jsx("th",{className:"text-left px-4 py-3 font-medium text-stone-600",children:"Website"}),e.jsx("th",{className:"text-right px-4 py-3 font-medium text-stone-600",children:"Actions"})]})}),e.jsx("tbody",{children:M.map(s=>e.jsxs("tr",{className:"border-b border-stone-100 table-row-hover",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-stone-900",children:s.name}),s.is_verified&&e.jsx(x,{variant:"success",size:"sm",children:"Verified"})]})}),e.jsxs("td",{className:"px-4 py-3 text-stone-600",children:[s.city,", ",s.state]}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex flex-wrap gap-1",children:[s.programs?.slice(0,3).map(a=>e.jsx(x,{variant:L[a.degree_type]||"default",size:"sm",children:a.degree_type},a.id)),(s.programs?.length||0)>3&&e.jsxs(x,{variant:"default",size:"sm",children:["+",(s.programs?.length||0)-3]})]})}),e.jsx("td",{className:"px-4 py-3 text-stone-600",children:s.phone||"—"}),e.jsx("td",{className:"px-4 py-3",children:s.website?e.jsx("a",{href:s.website,target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 hover:underline text-xs",children:s.website.replace(/^https?:\/\//,"").slice(0,30)}):"—"}),e.jsx("td",{className:"px-4 py-3 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-1",children:[u&&e.jsxs(e.Fragment,{children:[e.jsx(t,{variant:"ghost",size:"sm",onClick:()=>U(s),children:e.jsx(E,{className:"w-3.5 h-3.5"})}),e.jsx(t,{variant:"ghost",size:"sm",onClick:()=>g(s),children:e.jsx(T,{className:"w-3.5 h-3.5 text-red-500"})})]}),e.jsx(t,{variant:"ghost",size:"sm",onClick:()=>l(`/universities/${s.id}`),children:"Details"})]})})]},s.id))})]})}),!c&&z>1&&e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(t,{variant:"outline",size:"sm",disabled:C<=1,onClick:()=>w(s=>s-1),children:e.jsx(je,{className:"w-4 h-4"})}),e.jsxs("span",{className:"text-sm text-stone-600",children:["Page ",C," of ",z]}),e.jsx(t,{variant:"outline",size:"sm",disabled:C>=z,onClick:()=>w(s=>s+1),children:e.jsx(fe,{className:"w-4 h-4"})})]}),r&&e.jsx(b,{isOpen:!0,onClose:()=>f(null),title:r.name,size:"lg",children:e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-stone-500 mb-1",children:"Address"}),e.jsxs("p",{className:"text-sm font-semibold text-stone-900",children:[r.address,", ",r.city,", ",r.state," ",r.zip]})]}),r.phone&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-stone-500 mb-1",children:"Phone"}),e.jsxs("p",{className:"text-sm font-semibold text-stone-900 flex items-center gap-1",children:[e.jsx(Y,{className:"w-3.5 h-3.5"})," ",r.phone]})]}),r.website&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-stone-500 mb-1",children:"Website"}),e.jsxs("a",{href:r.website,target:"_blank",rel:"noopener noreferrer",className:"text-sm font-semibold text-primary-600 flex items-center gap-1 hover:underline",children:[e.jsx(ye,{className:"w-3.5 h-3.5"})," ",r.website.replace(/^https?:\/\//,"")]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-stone-500 mb-1",children:"Status"}),e.jsx(x,{variant:r.is_verified?"success":"warning",children:r.is_verified?"Verified":"Pending Verification"})]})]}),r.programs&&r.programs.length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-semibold text-stone-900 mb-3 flex items-center gap-2",children:[e.jsx(D,{className:"w-4 h-4 text-primary-500"}),"Programs (",r.programs.length,")"]}),e.jsx("div",{className:"space-y-2",children:r.programs.map(s=>e.jsx("div",{className:"bg-stone-50 rounded-xl p-4 flex flex-col sm:flex-row sm:items-center gap-3",children:e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:"font-medium text-stone-900 text-sm truncate",children:s.name}),e.jsx(x,{variant:L[s.degree_type]||"default",size:"sm",children:s.degree_type}),!s.is_active&&e.jsx(x,{variant:"danger",size:"sm",children:"Inactive"})]}),e.jsxs("div",{className:"flex flex-wrap gap-3 text-xs text-stone-500",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(xe,{className:"w-3 h-3"})," ",s.required_hours," hours required"]}),s.specialties&&s.specialties.length>0&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(be,{className:"w-3 h-3"})," ",s.specialties.join(", ")]})]})]})},s.id))})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[u&&e.jsxs(e.Fragment,{children:[e.jsxs(t,{variant:"outline",onClick:()=>{f(null),U(r)},children:[e.jsx(E,{className:"w-3.5 h-3.5 mr-1.5"})," Edit"]}),e.jsxs(t,{variant:"outline",onClick:()=>{f(null),g(r)},className:"text-red-600 border-red-200 hover:bg-red-50",children:[e.jsx(T,{className:"w-3.5 h-3.5 mr-1.5"})," Delete"]})]}),e.jsx(t,{variant:"outline",onClick:()=>f(null),children:"Close"})]})]})}),K&&e.jsx(b,{isOpen:!0,onClose:()=>P(!1),title:"Add University",children:e.jsxs("form",{onSubmit:se,className:"space-y-6",children:[R,e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(t,{variant:"outline",type:"button",onClick:()=>P(!1),children:"Cancel"}),e.jsx(t,{type:"submit",isLoading:q.isPending,children:"Create University"})]})]})}),_&&e.jsx(b,{isOpen:!0,onClose:()=>S(null),title:"Edit University",children:e.jsxs("form",{onSubmit:ae,className:"space-y-6",children:[R,e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(t,{variant:"outline",type:"button",onClick:()=>S(null),children:"Cancel"}),e.jsx(t,{type:"submit",isLoading:W.isPending,children:"Save Changes"})]})]})}),y&&e.jsx(b,{isOpen:!0,onClose:()=>g(null),title:"Delete University",size:"sm",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("p",{className:"text-sm text-stone-600",children:["Are you sure you want to delete ",e.jsx("strong",{children:y.name}),"? This will also remove all associated programs. This action cannot be undone."]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(t,{variant:"outline",onClick:()=>g(null),children:"Cancel"}),e.jsx(t,{onClick:te,isLoading:G.isPending,className:"bg-red-600 hover:bg-red-700",children:"Delete"})]})]})})]})}function Ce({universityId:j,onClose:u}){const c=he(),[l,o]=n.useState({name:"",degree_type:"MSN",required_hours:500,specialties:""}),N=()=>{if(!l.name.trim()){h.error("Program name is required.");return}const i=l.specialties.split(",").map(p=>p.trim()).filter(Boolean);c.mutate({universityId:j,data:{name:l.name.trim(),degree_type:l.degree_type,required_hours:l.required_hours,specialties:i.length>0?i:void 0}},{onSuccess:()=>{h.success("Program created successfully."),u()},onError:p=>h.error(p.message||"Failed to create program.")})};return e.jsx(b,{isOpen:!0,onClose:u,title:"Add New Program",size:"md",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-stone-700 mb-1",children:"Program Name"}),e.jsx("input",{type:"text",value:l.name,onChange:i=>o({...l,name:i.target.value}),placeholder:"e.g. Family Nurse Practitioner",className:"w-full border border-stone-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-stone-700 mb-1",children:"Degree Type"}),e.jsx("select",{value:l.degree_type,onChange:i=>o({...l,degree_type:i.target.value}),className:"w-full border border-stone-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:Ne.map(i=>e.jsx("option",{value:i,children:i},i))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-stone-700 mb-1",children:"Required Clinical Hours"}),e.jsx("input",{type:"number",min:"0",value:l.required_hours,onChange:i=>o({...l,required_hours:Number(i.target.value)}),className:"w-full border border-stone-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-stone-700 mb-1",children:"Specialties (comma-separated)"}),e.jsx("input",{type:"text",value:l.specialties,onChange:i=>o({...l,specialties:i.target.value}),placeholder:"e.g. Family Practice, Pediatrics, Women's Health",className:"w-full border border-stone-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[e.jsx(t,{variant:"outline",onClick:u,children:"Cancel"}),e.jsxs(t,{onClick:N,isLoading:c.isPending,children:[e.jsx(O,{className:"w-4 h-4 mr-1"})," Create Program"]})]})]})})}export{Ie as UniversityDirectory};
